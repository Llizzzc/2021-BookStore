{"remainingRequest":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\admin\\AllBook.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\admin\\AllBook.vue","mtime":1620223953395},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2FkbWluL0Rlc2t0b3AvbHpjX3dlYnNpdGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgeyBwb3N0IH0gZnJvbSAnLi4vLi4vdXRpbHMvcmVxdWVzdCc7CmltcG9ydCB7IHVzZVJvdXRlciwgdXNlUm91dGUgfSBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IHsgcmVhY3RpdmUsIHRvUmVmcyB9IGZyb20gJ3Z1ZSc7CmltcG9ydCBCb29rQ29udGVudCBmcm9tICcuLi9hZG1pbi9Cb29rQ29udGVudCc7CmltcG9ydCBUb2FzdCwgeyB1c2VUb2FzdEVmZmVjdCB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvVG9hc3QnOyAvLyDngrnlh7vlm57pgIAKCnZhciB1c2VCYWNrUm91dGVyRWZmZWN0ID0gZnVuY3Rpb24gdXNlQmFja1JvdXRlckVmZmVjdCgpIHsKICB2YXIgcm91dGVyID0gdXNlUm91dGVyKCk7CgogIHZhciBoYW5kbGVCYWNrQ2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVCYWNrQ2xpY2soKSB7CiAgICByb3V0ZXIuYmFjaygpOwogIH07CgogIHJldHVybiB7CiAgICBoYW5kbGVCYWNrQ2xpY2s6IGhhbmRsZUJhY2tDbGljawogIH07Cn07IC8vIOeCueWHu+aQnOe0ogoKCnZhciB1c2VTZWFyY2hFZmZlY3QgPSBmdW5jdGlvbiB1c2VTZWFyY2hFZmZlY3Qoc2hvd1RvYXN0KSB7CiAgdmFyIHJvdXRlID0gdXNlUm91dGUoKTsKICB2YXIgc2hvcElkID0gcm91dGUucGFyYW1zLmlkOwogIHZhciBkYXRhID0gcmVhY3RpdmUoewogICAgbmFtZTogJycsCiAgICB0YWI6IDAKICB9KTsKCiAgdmFyIGhhbmRsZVNlYXJjaENsaWNrID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgcmVzdWx0OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKCEoZGF0YS5uYW1lID09PSAnJykpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBzaG93VG9hc3QoJ+ivt+i+k+WFpeWVhuWTgeWQjeensCEnKTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDQ7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgcmV0dXJuIHBvc3QoJy9zZWFyY2gnLCB7CiAgICAgICAgICAgICAgICBpZDogc2hvcElkLAogICAgICAgICAgICAgICAgbmFtZTogZGF0YS5uYW1lCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gJ05vbmUnKSB7CiAgICAgICAgICAgICAgICBzaG93VG9hc3QoJ+acquaJvuWIsOivpeS5puexjSEnKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZGF0YS50YWIgPSByZXN1bHQ7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMTsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDQpOwogICAgICAgICAgICAgIHNob3dUb2FzdCgn6K+35rGC5aSx6LSlIScpOwoKICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1s0LCAxMV1dKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlU2VhcmNoQ2xpY2soKSB7CiAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKCiAgdmFyIF90b1JlZnMgPSB0b1JlZnMoZGF0YSksCiAgICAgIG5hbWUgPSBfdG9SZWZzLm5hbWUsCiAgICAgIHRhYiA9IF90b1JlZnMudGFiOwoKICByZXR1cm4gewogICAgaGFuZGxlU2VhcmNoQ2xpY2s6IGhhbmRsZVNlYXJjaENsaWNrLAogICAgbmFtZTogbmFtZSwKICAgIHRhYjogdGFiCiAgfTsKfTsgLy8g5aKe5Yqg5Lmm57GN6YC76L6RCgoKdmFyIHVzZUFkZEJvb2sgPSBmdW5jdGlvbiB1c2VBZGRCb29rKCkgewogIHZhciByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKCiAgdmFyIGhhbmRsZUFkZCA9IGZ1bmN0aW9uIGhhbmRsZUFkZCgpIHsKICAgIHJvdXRlci5wdXNoKHsKICAgICAgbmFtZTogJ0FkZEJvb2snCiAgICB9KTsKICB9OwoKICByZXR1cm4gaGFuZGxlQWRkOwp9OwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBbGxCb29rJywKICBjb21wb25lbnRzOiB7CiAgICBCb29rQ29udGVudDogQm9va0NvbnRlbnQsCiAgICBUb2FzdDogVG9hc3QKICB9LAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIHZhciBfdXNlVG9hc3RFZmZlY3QgPSB1c2VUb2FzdEVmZmVjdCgpLAogICAgICAgIHNob3cgPSBfdXNlVG9hc3RFZmZlY3Quc2hvdywKICAgICAgICB0b2FzdE1lc3NhZ2UgPSBfdXNlVG9hc3RFZmZlY3QudG9hc3RNZXNzYWdlLAogICAgICAgIHNob3dUb2FzdCA9IF91c2VUb2FzdEVmZmVjdC5zaG93VG9hc3Q7CgogICAgdmFyIF91c2VCYWNrUm91dGVyRWZmZWN0ID0gdXNlQmFja1JvdXRlckVmZmVjdCgpLAogICAgICAgIGhhbmRsZUJhY2tDbGljayA9IF91c2VCYWNrUm91dGVyRWZmZWN0LmhhbmRsZUJhY2tDbGljazsKCiAgICB2YXIgaGFuZGxlQWRkID0gdXNlQWRkQm9vaygpOwoKICAgIHZhciBfdXNlU2VhcmNoRWZmZWN0ID0gdXNlU2VhcmNoRWZmZWN0KHNob3dUb2FzdCksCiAgICAgICAgaGFuZGxlU2VhcmNoQ2xpY2sgPSBfdXNlU2VhcmNoRWZmZWN0LmhhbmRsZVNlYXJjaENsaWNrLAogICAgICAgIG5hbWUgPSBfdXNlU2VhcmNoRWZmZWN0Lm5hbWUsCiAgICAgICAgdGFiID0gX3VzZVNlYXJjaEVmZmVjdC50YWI7CgogICAgcmV0dXJuIHsKICAgICAgaGFuZGxlQmFja0NsaWNrOiBoYW5kbGVCYWNrQ2xpY2ssCiAgICAgIGhhbmRsZVNlYXJjaENsaWNrOiBoYW5kbGVTZWFyY2hDbGljaywKICAgICAgc2hvdzogc2hvdywKICAgICAgdG9hc3RNZXNzYWdlOiB0b2FzdE1lc3NhZ2UsCiAgICAgIG5hbWU6IG5hbWUsCiAgICAgIHRhYjogdGFiLAogICAgICBoYW5kbGVBZGQ6IGhhbmRsZUFkZAogICAgfTsKICB9Cn07"},{"version":3,"sources":["C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\admin\\AllBook.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"warpper\">\r\n    <div class=\"search\">\r\n      <div\r\n        class=\"search__back iconfont\"\r\n        @click=\"handleBackClick\"\r\n      >&#xe602;</div>\r\n    </div>\r\n    <Toast\r\n      v-if=\"show\"\r\n      :message=\"toastMessage\"\r\n    />\r\n  </div>\r\n  <BookContent />\r\n  <div\r\n    class=\"add\"\r\n    @click=\"handleAdd\"\r\n  >增加书籍</div>\r\n</template>\r\n\r\n<script>\r\nimport { post } from '../../utils/request'\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport { reactive, toRefs } from 'vue'\r\nimport BookContent from '../admin/BookContent'\r\nimport Toast, { useToastEffect } from '../../components/Toast'\r\n\r\n// 点击回退\r\nconst useBackRouterEffect = () => {\r\n  const router = useRouter()\r\n  const handleBackClick = () => {\r\n    router.back()\r\n  }\r\n  return { handleBackClick }\r\n}\r\n\r\n// 点击搜索\r\nconst useSearchEffect = (showToast) => {\r\n  const route = useRoute()\r\n  const shopId = route.params.id\r\n  const data = reactive({\r\n    name: '',\r\n    tab: 0\r\n  })\r\n  const handleSearchClick = async () => {\r\n    if (data.name === '') {\r\n      showToast('请输入商品名称!')\r\n    } else {\r\n      try {\r\n        const result = await post('/search', {\r\n          id: shopId,\r\n          name: data.name\r\n        })\r\n        if (result === 'None') {\r\n          showToast('未找到该书籍!')\r\n        } else {\r\n          data.tab = result\r\n        }\r\n      } catch (e) {\r\n        showToast('请求失败!')\r\n      }\r\n    }\r\n  }\r\n  const { name, tab } = toRefs(data)\r\n  return { handleSearchClick, name, tab }\r\n}\r\n\r\n// 增加书籍逻辑\r\nconst useAddBook = () => {\r\n  const router = useRouter()\r\n  const handleAdd = () => {\r\n    router.push({ name: 'AddBook' })\r\n  }\r\n  return handleAdd\r\n}\r\n\r\nexport default {\r\n  name: 'AllBook',\r\n  components: { BookContent, Toast },\r\n  setup () {\r\n    const { show, toastMessage, showToast } = useToastEffect()\r\n    const { handleBackClick } = useBackRouterEffect()\r\n    const handleAdd = useAddBook()\r\n    const { handleSearchClick, name, tab } = useSearchEffect(showToast)\r\n    return { handleBackClick, handleSearchClick, show, toastMessage, name, tab, handleAdd }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.wrapper {\r\n  padding: 0 0.18rem;\r\n}\r\n\r\n.search {\r\n  display: flex;\r\n  margin: 0.2rem 0 0.16rem 0;\r\n  &__back {\r\n    width: 0.3rem;\r\n    font-size: 0.3rem;\r\n    color: #b6b6b6;\r\n  }\r\n}\r\n.add {\r\n  position: absolute;\r\n  width: 100%;\r\n  bottom: 0;\r\n  line-height: 0.32rem;\r\n  background: #0091ff;\r\n  color: #f8f8f8;\r\n  text-align: center;\r\n  border-radius: 0.04rem;\r\n}\r\n</style>\r\n"],"sourceRoot":""}]}