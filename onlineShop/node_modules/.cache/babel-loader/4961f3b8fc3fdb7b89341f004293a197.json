{"remainingRequest":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\admin\\Desktop\\lzc_website\\src\\effects\\cartEffects.js","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\src\\effects\\cartEffects.js","mtime":1615798308000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIjsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tICd2dWUnOyAvLyDotK3nianovabnm7jlhbPpgLvovpEKCmV4cG9ydCB2YXIgdXNlQ29tbW9uQ2FydEVmZmVjdCA9IGZ1bmN0aW9uIHVzZUNvbW1vbkNhcnRFZmZlY3Qoc2hvcElkKSB7CiAgdmFyIHN0b3JlID0gdXNlU3RvcmUoKTsKICB2YXIgY2FydExpc3QgPSBzdG9yZS5zdGF0ZS5jYXJ0TGlzdDsKCiAgdmFyIGNoYW5nZUNhcnRJdGVtSW5mbyA9IGZ1bmN0aW9uIGNoYW5nZUNhcnRJdGVtSW5mbyhzaG9wSWQsIHByb2R1Y3RJZCwgcHJvZHVjdEluZm8sIG51bSkgewogICAgc3RvcmUuY29tbWl0KCdjaGFuZ2VDYXJ0SXRlbUluZm8nLCB7CiAgICAgIHNob3BJZDogc2hvcElkLAogICAgICBwcm9kdWN0SWQ6IHByb2R1Y3RJZCwKICAgICAgcHJvZHVjdEluZm86IHByb2R1Y3RJbmZvLAogICAgICBudW06IG51bQogICAgfSk7CiAgfTsKCiAgdmFyIHByb2R1Y3RMaXN0ID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgdmFyIF9jYXJ0TGlzdCRzaG9wSWQ7CgogICAgdmFyIHByb2R1Y3RMaXN0ID0gKChfY2FydExpc3Qkc2hvcElkID0gY2FydExpc3Rbc2hvcElkXSkgPT09IG51bGwgfHwgX2NhcnRMaXN0JHNob3BJZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NhcnRMaXN0JHNob3BJZC5wcm9kdWN0TGlzdCkgfHwge307CiAgICB2YXIgbm90RW1wdHlQcm9kdWN0TGlzdCA9IHt9OyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWNvbnN0CgogICAgZm9yICh2YXIgaSBpbiBwcm9kdWN0TGlzdCkgewogICAgICB2YXIgcHJvZHVjdCA9IHByb2R1Y3RMaXN0W2ldOwoKICAgICAgaWYgKHByb2R1Y3QuY291bnQgPiAwKSB7CiAgICAgICAgbm90RW1wdHlQcm9kdWN0TGlzdFtpXSA9IHByb2R1Y3Q7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbm90RW1wdHlQcm9kdWN0TGlzdDsKICB9KTsKICB2YXIgc2hvcE5hbWUgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICB2YXIgX2NhcnRMaXN0JHNob3BJZDI7CgogICAgdmFyIHNob3BOYW1lID0gKChfY2FydExpc3Qkc2hvcElkMiA9IGNhcnRMaXN0W3Nob3BJZF0pID09PSBudWxsIHx8IF9jYXJ0TGlzdCRzaG9wSWQyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2FydExpc3Qkc2hvcElkMi5zaG9wTmFtZSkgfHwgJyc7CiAgICByZXR1cm4gc2hvcE5hbWU7CiAgfSk7CiAgdmFyIGNhbGN1bGF0aW9ucyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHZhciBfY2FydExpc3Qkc2hvcElkMzsKCiAgICB2YXIgcHJvZHVjdExpc3QgPSAoX2NhcnRMaXN0JHNob3BJZDMgPSBjYXJ0TGlzdFtzaG9wSWRdKSA9PT0gbnVsbCB8fCBfY2FydExpc3Qkc2hvcElkMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NhcnRMaXN0JHNob3BJZDMucHJvZHVjdExpc3Q7CiAgICB2YXIgcmVzdWx0ID0gewogICAgICB0b3RhbDogMCwKICAgICAgcHJpY2U6IDAsCiAgICAgIGFsbENoZWNrZWQ6IHRydWUKICAgIH07CgogICAgaWYgKHByb2R1Y3RMaXN0KSB7CiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItY29uc3QKICAgICAgZm9yICh2YXIgaSBpbiBwcm9kdWN0TGlzdCkgewogICAgICAgIHZhciBwcm9kdWN0ID0gcHJvZHVjdExpc3RbaV07CiAgICAgICAgcmVzdWx0LnRvdGFsICs9IHByb2R1Y3QuY291bnQ7CgogICAgICAgIGlmIChwcm9kdWN0LmNoZWNrKSB7CiAgICAgICAgICByZXN1bHQucHJpY2UgKz0gcHJvZHVjdC5jb3VudCAqIHByb2R1Y3QucHJpY2U7CiAgICAgICAgfQoKICAgICAgICBpZiAocHJvZHVjdC5jb3VudCA+IDAgJiYgIXByb2R1Y3QuY2hlY2spIHsKICAgICAgICAgIHJlc3VsdC5hbGxDaGVja2VkID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmVzdWx0LnByaWNlID0gcmVzdWx0LnByaWNlLnRvRml4ZWQoMik7CiAgICByZXR1cm4gcmVzdWx0OwogIH0pOwogIHJldHVybiB7CiAgICBjaGFuZ2VDYXJ0SXRlbUluZm86IGNoYW5nZUNhcnRJdGVtSW5mbywKICAgIGNhcnRMaXN0OiBjYXJ0TGlzdCwKICAgIHByb2R1Y3RMaXN0OiBwcm9kdWN0TGlzdCwKICAgIHNob3BOYW1lOiBzaG9wTmFtZSwKICAgIGNhbGN1bGF0aW9uczogY2FsY3VsYXRpb25zCiAgfTsKfTs="},{"version":3,"sources":["C:/Users/admin/Desktop/lzc_website/src/effects/cartEffects.js"],"names":["useStore","computed","useCommonCartEffect","shopId","store","cartList","state","changeCartItemInfo","productId","productInfo","num","commit","productList","notEmptyProductList","i","product","count","shopName","calculations","result","total","price","allChecked","check","toFixed"],"mappings":";AAAA,SACEA,QADF,QAEO,MAFP;AAGA,SACEC,QADF,QAEO,KAFP,C,CAGA;;AACA,OAAO,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,MAAD,EAAY;AAC7C,MAAMC,KAAK,GAAGJ,QAAQ,EAAtB;AACA,MAAMK,QAAQ,GAAGD,KAAK,CAACE,KAAN,CAAYD,QAA7B;;AACA,MAAME,kBAAkB,GAAG,SAArBA,kBAAqB,CAACJ,MAAD,EAASK,SAAT,EAAoBC,WAApB,EAAiCC,GAAjC,EAAyC;AAClEN,IAAAA,KAAK,CAACO,MAAN,CAAa,oBAAb,EAAmC;AACjCR,MAAAA,MAAM,EAANA,MADiC;AAEjCK,MAAAA,SAAS,EAATA,SAFiC;AAGjCC,MAAAA,WAAW,EAAXA,WAHiC;AAIjCC,MAAAA,GAAG,EAAHA;AAJiC,KAAnC;AAMD,GAPD;;AASA,MAAME,WAAW,GAAGX,QAAQ,CAAC,YAAM;AAAA;;AACjC,QAAMW,WAAW,GAAG,qBAAAP,QAAQ,CAACF,MAAD,CAAR,sEAAkBS,WAAlB,KAAiC,EAArD;AACA,QAAMC,mBAAmB,GAAG,EAA5B,CAFiC,CAGjC;;AACA,SAAK,IAAIC,CAAT,IAAcF,WAAd,EAA2B;AACzB,UAAMG,OAAO,GAAGH,WAAW,CAACE,CAAD,CAA3B;;AACA,UAAIC,OAAO,CAACC,KAAR,GAAgB,CAApB,EAAuB;AACrBH,QAAAA,mBAAmB,CAACC,CAAD,CAAnB,GAAyBC,OAAzB;AACD;AACF;;AAED,WAAOF,mBAAP;AACD,GAZ2B,CAA5B;AAcA,MAAMI,QAAQ,GAAGhB,QAAQ,CAAC,YAAM;AAAA;;AAC9B,QAAMgB,QAAQ,GAAG,sBAAAZ,QAAQ,CAACF,MAAD,CAAR,wEAAkBc,QAAlB,KAA8B,EAA/C;AACA,WAAOA,QAAP;AACD,GAHwB,CAAzB;AAKA,MAAMC,YAAY,GAAGjB,QAAQ,CAAC,YAAM;AAAA;;AAClC,QAAMW,WAAW,wBAAGP,QAAQ,CAACF,MAAD,CAAX,sDAAG,kBAAkBS,WAAtC;AACA,QAAMO,MAAM,GAAG;AACbC,MAAAA,KAAK,EAAE,CADM;AAEbC,MAAAA,KAAK,EAAE,CAFM;AAGbC,MAAAA,UAAU,EAAE;AAHC,KAAf;;AAKA,QAAIV,WAAJ,EAAiB;AACf;AACA,WAAK,IAAIE,CAAT,IAAcF,WAAd,EAA2B;AACzB,YAAMG,OAAO,GAAGH,WAAW,CAACE,CAAD,CAA3B;AACAK,QAAAA,MAAM,CAACC,KAAP,IAAgBL,OAAO,CAACC,KAAxB;;AACA,YAAID,OAAO,CAACQ,KAAZ,EAAmB;AACjBJ,UAAAA,MAAM,CAACE,KAAP,IAAiBN,OAAO,CAACC,KAAR,GAAgBD,OAAO,CAACM,KAAzC;AACD;;AACD,YAAIN,OAAO,CAACC,KAAR,GAAgB,CAAhB,IAAqB,CAACD,OAAO,CAACQ,KAAlC,EAAyC;AACvCJ,UAAAA,MAAM,CAACG,UAAP,GAAoB,KAApB;AACD;AACF;AACF;;AACDH,IAAAA,MAAM,CAACE,KAAP,GAAeF,MAAM,CAACE,KAAP,CAAaG,OAAb,CAAqB,CAArB,CAAf;AACA,WAAOL,MAAP;AACD,GAtB4B,CAA7B;AAwBA,SAAO;AACLZ,IAAAA,kBAAkB,EAAlBA,kBADK;AAELF,IAAAA,QAAQ,EAARA,QAFK;AAGLO,IAAAA,WAAW,EAAXA,WAHK;AAILK,IAAAA,QAAQ,EAARA,QAJK;AAKLC,IAAAA,YAAY,EAAZA;AALK,GAAP;AAOD,CA9DM","sourcesContent":["import {\n  useStore\n} from 'vuex'\nimport {\n  computed\n} from 'vue'\n// 购物车相关逻辑\nexport const useCommonCartEffect = (shopId) => {\n  const store = useStore()\n  const cartList = store.state.cartList\n  const changeCartItemInfo = (shopId, productId, productInfo, num) => {\n    store.commit('changeCartItemInfo', {\n      shopId,\n      productId,\n      productInfo,\n      num\n    })\n  }\n\n  const productList = computed(() => {\n    const productList = cartList[shopId]?.productList || {}\n    const notEmptyProductList = {}\n    // eslint-disable-next-line prefer-const\n    for (let i in productList) {\n      const product = productList[i]\n      if (product.count > 0) {\n        notEmptyProductList[i] = product\n      }\n    }\n\n    return notEmptyProductList\n  })\n\n  const shopName = computed(() => {\n    const shopName = cartList[shopId]?.shopName || ''\n    return shopName\n  })\n\n  const calculations = computed(() => {\n    const productList = cartList[shopId]?.productList\n    const result = {\n      total: 0,\n      price: 0,\n      allChecked: true\n    }\n    if (productList) {\n      // eslint-disable-next-line prefer-const\n      for (let i in productList) {\n        const product = productList[i]\n        result.total += product.count\n        if (product.check) {\n          result.price += (product.count * product.price)\n        }\n        if (product.count > 0 && !product.check) {\n          result.allChecked = false\n        }\n      }\n    }\n    result.price = result.price.toFixed(2)\n    return result\n  })\n\n  return {\n    changeCartItemInfo,\n    cartList,\n    productList,\n    shopName,\n    calculations\n  }\n}\n"]}]}