{"remainingRequest":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\admin\\DeleteBook.vue?vue&type=template&id=159ca7a4&scoped=true","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\admin\\DeleteBook.vue","mtime":1620218343721},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCB7IGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgdG9EaXNwbGF5U3RyaW5nIGFzIF90b0Rpc3BsYXlTdHJpbmcsIHJlc29sdmVDb21wb25lbnQgYXMgX3Jlc29sdmVDb21wb25lbnQsIG9wZW5CbG9jayBhcyBfb3BlbkJsb2NrLCBjcmVhdGVCbG9jayBhcyBfY3JlYXRlQmxvY2ssIGNyZWF0ZUNvbW1lbnRWTm9kZSBhcyBfY3JlYXRlQ29tbWVudFZOb2RlLCBGcmFnbWVudCBhcyBfRnJhZ21lbnQsIHdpdGhTY29wZUlkIGFzIF93aXRoU2NvcGVJZCwgcHVzaFNjb3BlSWQgYXMgX3B1c2hTY29wZUlkLCBwb3BTY29wZUlkIGFzIF9wb3BTY29wZUlkIH0gZnJvbSAidnVlIjsKCnZhciBfd2l0aElkID0gLyojX19QVVJFX18qL193aXRoU2NvcGVJZCgiZGF0YS12LTE1OWNhN2E0Iik7CgpfcHVzaFNjb3BlSWQoImRhdGEtdi0xNTljYTdhNCIpOwoKdmFyIF9ob2lzdGVkXzEgPSB7CiAgY2xhc3M6ICJ3cmFwcGVyIgp9Owp2YXIgX2hvaXN0ZWRfMiA9IHsKICBjbGFzczogInRpdGxlIgp9OwoKdmFyIF9ob2lzdGVkXzMgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVZOb2RlKCJkaXYiLCB7CiAgY2xhc3M6ICJ0aXRsZV9fdGV4dCIKfSwgIiDliKDpmaTkuabnsY0gIiwgLTEKLyogSE9JU1RFRCAqLwopOwoKdmFyIF9ob2lzdGVkXzQgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVZOb2RlKCJkaXYiLCB7CiAgY2xhc3M6ICJ0aXRsZV9fc2F2ZSIKfSwgbnVsbCwgLTEKLyogSE9JU1RFRCAqLwopOwoKdmFyIF9ob2lzdGVkXzUgPSB7CiAgY2xhc3M6ICJmb3JtIgp9Owp2YXIgX2hvaXN0ZWRfNiA9IHsKICBjbGFzczogImZvcm1fX2l0ZW0iCn07Cgp2YXIgX2hvaXN0ZWRfNyA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVk5vZGUoImRpdiIsIHsKICBjbGFzczogImZvcm1fX2l0ZW1fX2xhYmVsIgp9LCAi57G75YirOiIsIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF84ID0gewogIGNsYXNzOiAiZm9ybV9faXRlbV9fY29udGVudCIKfTsKdmFyIF9ob2lzdGVkXzkgPSB7CiAgY2xhc3M6ICJmb3JtX19pdGVtIgp9OwoKdmFyIF9ob2lzdGVkXzEwID0gLyojX19QVVJFX18qL19jcmVhdGVWTm9kZSgiZGl2IiwgewogIGNsYXNzOiAiZm9ybV9faXRlbV9fbGFiZWwiCn0sICLkuablkI06IiwgLTEKLyogSE9JU1RFRCAqLwopOwoKdmFyIF9ob2lzdGVkXzExID0gewogIGNsYXNzOiAiZm9ybV9faXRlbV9fY29udGVudCIKfTsKCl9wb3BTY29wZUlkKCk7CgpleHBvcnQgdmFyIHJlbmRlciA9IC8qI19fUFVSRV9fKi9fd2l0aElkKGZ1bmN0aW9uIChfY3R4LCBfY2FjaGUsICRwcm9wcywgJHNldHVwLCAkZGF0YSwgJG9wdGlvbnMpIHsKICB2YXIgX2NvbXBvbmVudF9Ub2FzdCA9IF9yZXNvbHZlQ29tcG9uZW50KCJUb2FzdCIpOwoKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX0ZyYWdtZW50LCBudWxsLCBbX2NyZWF0ZVZOb2RlKCJkaXYiLCBfaG9pc3RlZF8xLCBbX2NyZWF0ZVZOb2RlKCJkaXYiLCBfaG9pc3RlZF8yLCBbX2NyZWF0ZVZOb2RlKCJkaXYiLCB7CiAgICBjbGFzczogImljb25mb250IHRpdGxlX19iYWNrIiwKICAgIG9uQ2xpY2s6IF9jYWNoZVsxXSB8fCAoX2NhY2hlWzFdID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gJHNldHVwLmhhbmRsZUJhY2tDbGljayAmJiAkc2V0dXAuaGFuZGxlQmFja0NsaWNrLmFwcGx5KCRzZXR1cCwgYXJndW1lbnRzKTsKICAgIH0pCiAgfSwgIu6YgiIpLCBfaG9pc3RlZF8zLCBfaG9pc3RlZF80XSksIF9jcmVhdGVWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfNSwgW19jcmVhdGVWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfNiwgW19ob2lzdGVkXzcsIF9jcmVhdGVWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfOCwgX3RvRGlzcGxheVN0cmluZygkc2V0dXAuaXRlbS50YWIpLCAxCiAgLyogVEVYVCAqLwogICldKSwgX2NyZWF0ZVZOb2RlKCJkaXYiLCBfaG9pc3RlZF85LCBbX2hvaXN0ZWRfMTAsIF9jcmVhdGVWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMTEsIF90b0Rpc3BsYXlTdHJpbmcoJHNldHVwLml0ZW0ubmFtZSksIDEKICAvKiBURVhUICovCiAgKV0pXSksIF9jcmVhdGVWTm9kZSgiZGl2IiwgewogICAgY2xhc3M6ICJkZWxhdGUiLAogICAgb25DbGljazogX2NhY2hlWzJdIHx8IChfY2FjaGVbMl0gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAkc2V0dXAuaGFuZGxlRGVsZXRlICYmICRzZXR1cC5oYW5kbGVEZWxldGUuYXBwbHkoJHNldHVwLCBhcmd1bWVudHMpOwogICAgfSkKICB9LCAiIOWIoOmZpCIpXSksICRzZXR1cC5zaG93ID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9jb21wb25lbnRfVG9hc3QsIHsKICAgIGtleTogMCwKICAgIG1lc3NhZ2U6ICRzZXR1cC50b2FzdE1lc3NhZ2UKICB9LCBudWxsLCA4CiAgLyogUFJPUFMgKi8KICAsIFsibWVzc2FnZSJdKSkgOiBfY3JlYXRlQ29tbWVudFZOb2RlKCJ2LWlmIiwgdHJ1ZSldLCA2NAogIC8qIFNUQUJMRV9GUkFHTUVOVCAqLwogICk7Cn0pOw=="},{"version":3,"sources":["C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\admin\\DeleteBook.vue"],"names":[],"mappings":";;;;;;;;AACO,EAAA,KAAK,EAAC;;;AACJ,EAAA,KAAK,EAAC;;;8BAKT,YAAA,CAEM,KAFN,EAEM;AAFD,EAAA,KAAK,EAAC;AAEL,CAFN,EAAyB,QAAzB,EAEA,CAAA;AAAA;AAFA,C;;8BAGA,YAAA,CAA+B,KAA/B,EAA+B;AAA1B,EAAA,KAAK,EAAC;AAAoB,CAA/B,EAAwB,IAAxB,EAAwB,CAAA;AAAA;AAAxB,C;;;AAEG,EAAA,KAAK,EAAC;;;AACJ,EAAA,KAAK,EAAC;;;8BACT,YAAA,CAAwC,KAAxC,EAAwC;AAAnC,EAAA,KAAK,EAAC;AAA6B,CAAxC,EAA+B,KAA/B,EAAkC,CAAA;AAAA;AAAlC,C;;;AACK,EAAA,KAAK,EAAC;;;AAIR,EAAA,KAAK,EAAC;;;+BACT,YAAA,CAAwC,KAAxC,EAAwC;AAAnC,EAAA,KAAK,EAAC;AAA6B,CAAxC,EAA+B,KAA/B,EAAkC,CAAA;AAAA;AAAlC,C;;;AACK,EAAA,KAAK,EAAC;;;;;;;;sDApBjB,YAAA,CA6BM,KA7BN,EAAA,UAAA,EA6BM,CA5BJ,YAAA,CASM,KATN,EAAA,UAAA,EASM,CARJ,YAAA,CAGe,KAHf,EAGe;AAFb,IAAA,KAAK,EAAC,sBAEO;AADZ,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,MAAA,CAAA,eAAA,IAAA,MAAA,CAAA,eAAA,OAAA,MAAA,YAAF;AAAA,KAAA;AACO,GAHf,EAGC,GAHD,CAQI,EAJJ,UAII,EADJ,UACI,CATN,CA4BI,EAlBJ,YAAA,CAaM,KAbN,EAAA,UAAA,EAaM,CAZJ,YAAA,CAKM,KALN,EAAA,UAAA,EAKM,CAJJ,UAII,EAHJ,YAAA,CAEM,KAFN,EAAA,UAAA,EAEM,gBAAA,CADD,MAAA,CAAA,IAAA,CAAK,GACJ,CAFN,EACa;AAAA;AADb,GAGI,CALN,CAYI,EANJ,YAAA,CAKM,KALN,EAAA,UAAA,EAKM,CAJJ,WAII,EAHJ,YAAA,CAEM,KAFN,EAAA,WAAA,EAEM,gBAAA,CADD,MAAA,CAAA,IAAA,CAAK,IACJ,CAFN,EACc;AAAA;AADd,GAGI,CALN,CAMI,CAbN,CAkBI,EAJJ,YAAA,CAGU,KAHV,EAGU;AAFR,IAAA,KAAK,EAAC,QAEE;AADP,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,MAAA,CAAA,YAAA,IAAA,MAAA,CAAA,YAAA,OAAA,MAAA,YAAF;AAAA,KAAA;AACE,GAHV,EAGC,KAHD,CAII,CA7BN,C,EA+BQ,MAAA,CAAA,I,kBADR,YAAA,CAGE,gBAHF,EAGE;UAAA;AADC,IAAA,OAAO,EAAE,MAAA,CAAA;AACV,GAHF,E,IAAA,E;;AAAA,I,WAAA,C","sourcesContent":["<template>\r\n  <div class=\"wrapper\">\r\n    <div class=\"title\">\r\n      <div\r\n        class=\"iconfont title__back\"\r\n        @click=\"handleBackClick\"\r\n      >&#xe602;</div>\r\n      <div class=\"title__text\">\r\n        删除书籍\r\n      </div>\r\n      <div class=\"title__save\"></div>\r\n    </div>\r\n    <div class=\"form\">\r\n      <div class=\"form__item\">\r\n        <div class=\"form__item__label\">类别:</div>\r\n        <div class=\"form__item__content\">\r\n          {{ item.tab }}\r\n        </div>\r\n      </div>\r\n      <div class=\"form__item\">\r\n        <div class=\"form__item__label\">书名:</div>\r\n        <div class=\"form__item__content\">\r\n          {{ item.name }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div\r\n      class=\"delate\"\r\n      @click=\"handleDelete\"\r\n    > 删除</div>\r\n  </div>\r\n  <Toast\r\n    v-if=\"show\"\r\n    :message=\"toastMessage\"\r\n  />\r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRefs } from 'vue'\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport { post, get } from '../../utils/request'\r\nimport Toast, { useToastEffect } from '../../components/Toast'\r\n\r\n// 删除书籍逻辑\r\nconst useUpdataAddressEffect = (showToast) => {\r\n  const route = useRoute()\r\n  const router = useRouter()\r\n  const handleDelete = async () => {\r\n    try {\r\n      const result = await post('/deleteBook', {\r\n        bookId: route.params.id\r\n      })\r\n      if (result === 'ok') {\r\n        showToast('删除成功!')\r\n        setTimeout(() => {\r\n          router.push({ name: 'AllBook' })\r\n        }, 2000)\r\n      }\r\n    } catch (e) {\r\n      showToast('请求失败!')\r\n    }\r\n  }\r\n  return handleDelete\r\n}\r\n\r\n// 点击回退\r\nconst useHandleBack = () => {\r\n  const router = useRouter()\r\n  const handleBackClick = () => { router.back() }\r\n  return handleBackClick\r\n}\r\n\r\n// 获取当前书籍信息\r\nconst useBookInfoEffect = () => {\r\n  const route = useRoute()\r\n  const data = reactive({ item: {} })\r\n  const getItemData = async () => {\r\n    const result = await get('/theBook', { bookId: route.params.id })\r\n    data.item = result\r\n  }\r\n  const { item } = toRefs(data)\r\n  return { item, getItemData }\r\n}\r\n\r\nexport default {\r\n  name: 'DeleteBook',\r\n  components: { Toast },\r\n  setup () {\r\n    const { show, toastMessage, showToast } = useToastEffect()\r\n    const handleBackClick = useHandleBack()\r\n    const { item, getItemData } = useBookInfoEffect()\r\n    const handleDelete = useUpdataAddressEffect(showToast)\r\n    getItemData()\r\n    return { item, handleBackClick, show, toastMessage, handleDelete }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.wrapper {\r\n  overflow-y: auto;\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  background: #f8f8f8;\r\n}\r\n.title {\r\n  display: flex;\r\n  line-height: 0.44rem;\r\n  background: #fff;\r\n  font-size: 0.16rem;\r\n  color: #333;\r\n  text-align: center;\r\n  &__back {\r\n    width: 0.2rem;\r\n    margin-left: 0.18rem;\r\n    font-size: 0.2rem;\r\n    color: #b7b7b7;\r\n  }\r\n  &__text {\r\n    flex: 1;\r\n    text-align: center;\r\n  }\r\n  &__save {\r\n    margin-right: 0.2rem;\r\n    font-size: 0.14rem;\r\n  }\r\n}\r\n.form {\r\n  padding: 0 0.2rem;\r\n  margin-top: 0.12rem;\r\n  background: #fff;\r\n  border-top: 0.01rem solid #f1f1f1;\r\n  border-bottom: 0.01rem solid #f1f1f1;\r\n  &__item {\r\n    display: flex;\r\n    padding: 0.12rem 0;\r\n    line-height: 0.2rem;\r\n    font-size: 0.14rem;\r\n    border-bottom: 0.01rem solid #f1f1f1;\r\n    &:last-of-type {\r\n      border-bottom: none;\r\n    }\r\n    &__label {\r\n      margin-right: 0.05rem;\r\n      color: #666;\r\n    }\r\n    &__content {\r\n      flex: 1;\r\n      border: none;\r\n      outline: none;\r\n      color: #3f3f3f;\r\n      &::placeholder {\r\n        color: #3f3f3f;\r\n      }\r\n    }\r\n  }\r\n}\r\n.delate {\r\n  margin: 0.18rem;\r\n  line-height: 0.32rem;\r\n  background: crimson;\r\n  color: #f8f8f8;\r\n  text-align: center;\r\n  border-radius: 0.04rem;\r\n}\r\n</style>\r\n"],"sourceRoot":""}]}