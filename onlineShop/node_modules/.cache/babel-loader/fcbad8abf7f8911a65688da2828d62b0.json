{"remainingRequest":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\admin\\EditBook.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\admin\\EditBook.vue","mtime":1620218702625},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2FkbWluL0Rlc2t0b3AvbHpjX3dlYnNpdGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgeyByZWFjdGl2ZSwgdG9SZWZzIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgdXNlUm91dGVyLCB1c2VSb3V0ZSB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgeyBwb3N0LCBnZXQgfSBmcm9tICcuLi8uLi91dGlscy9yZXF1ZXN0JzsKaW1wb3J0IFRvYXN0LCB7IHVzZVRvYXN0RWZmZWN0IH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9Ub2FzdCc7IC8vIOS/ruaUueS5puexjemAu+i+kQoKdmFyIHVzZVVwZGF0YUFkZHJlc3NFZmZlY3QgPSBmdW5jdGlvbiB1c2VVcGRhdGFBZGRyZXNzRWZmZWN0KHNob3dUb2FzdCkgewogIHZhciByb3V0ZSA9IHVzZVJvdXRlKCk7CiAgdmFyIHJvdXRlciA9IHVzZVJvdXRlcigpOwogIHZhciBkYXRhID0gcmVhY3RpdmUoewogICAgdGFiOiAnJywKICAgIG5hbWU6ICcnLAogICAgaW1nVXJsOiAnJwogIH0pOwoKICB2YXIgb25DaGFuZ2UgPSBmdW5jdGlvbiBvbkNoYW5nZShlKSB7CiAgICBkYXRhLmltZ1VybCA9IGUudGFyZ2V0LmZpbGVzWzBdLm5hbWU7CiAgfTsKCiAgdmFyIGhhbmRsZVVwZGF0YSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIHJlc3VsdDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBwb3N0KCcvdXBkYXRlQm9vaycsIHsKICAgICAgICAgICAgICAgIGJvb2tJZDogcm91dGUucGFyYW1zLmlkLAogICAgICAgICAgICAgICAgdGFiOiBkYXRhLnRhYiwKICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSwKICAgICAgICAgICAgICAgIGltZ1VybDogZGF0YS5pbWdVcmwKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSAnb2snKSB7CiAgICAgICAgICAgICAgICBzaG93VG9hc3QoJ+S/ruaUueaIkOWKnyEnKTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ0FsbEJvb2snCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSwgMjAwMCk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgPT09ICdleGlzdCcpIHsKICAgICAgICAgICAgICAgIHNob3dUb2FzdCgn6K+l5Lmm5ZCN5bey5a2Y5ZyoIScpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA3OwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgc2hvd1RvYXN0KCfor7fmsYLlpLHotKUhJyk7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzAsIDddXSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIGhhbmRsZVVwZGF0YSgpIHsKICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpOwoKICB2YXIgX3RvUmVmcyA9IHRvUmVmcyhkYXRhKSwKICAgICAgdGFiID0gX3RvUmVmcy50YWIsCiAgICAgIG5hbWUgPSBfdG9SZWZzLm5hbWUsCiAgICAgIGltZ1VybCA9IF90b1JlZnMuaW1nVXJsOwoKICByZXR1cm4gewogICAgaGFuZGxlVXBkYXRhOiBoYW5kbGVVcGRhdGEsCiAgICB0YWI6IHRhYiwKICAgIG5hbWU6IG5hbWUsCiAgICBpbWdVcmw6IGltZ1VybCwKICAgIG9uQ2hhbmdlOiBvbkNoYW5nZQogIH07Cn07IC8vIOeCueWHu+WbnumAgAoKCnZhciB1c2VIYW5kbGVCYWNrID0gZnVuY3Rpb24gdXNlSGFuZGxlQmFjaygpIHsKICB2YXIgcm91dGVyID0gdXNlUm91dGVyKCk7CgogIHZhciBoYW5kbGVCYWNrQ2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVCYWNrQ2xpY2soKSB7CiAgICByb3V0ZXIuYmFjaygpOwogIH07CgogIHJldHVybiBoYW5kbGVCYWNrQ2xpY2s7Cn07IC8vIOiOt+WPluW9k+WJjeS5puexjeS/oeaBrwoKCnZhciB1c2VCb29rSW5mb0VmZmVjdCA9IGZ1bmN0aW9uIHVzZUJvb2tJbmZvRWZmZWN0KCkgewogIHZhciByb3V0ZSA9IHVzZVJvdXRlKCk7CiAgdmFyIGRhdGEgPSByZWFjdGl2ZSh7CiAgICBpdGVtOiB7fQogIH0pOwoKICB2YXIgZ2V0SXRlbURhdGEgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIHJlc3VsdDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIGdldCgnL3RoZUJvb2snLCB7CiAgICAgICAgICAgICAgICBib29rSWQ6IHJvdXRlLnBhcmFtcy5pZAogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIGRhdGEuaXRlbSA9IHJlc3VsdDsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gZ2V0SXRlbURhdGEoKSB7CiAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7CgogIHZhciBfdG9SZWZzMiA9IHRvUmVmcyhkYXRhKSwKICAgICAgaXRlbSA9IF90b1JlZnMyLml0ZW07CgogIHJldHVybiB7CiAgICBpdGVtOiBpdGVtLAogICAgZ2V0SXRlbURhdGE6IGdldEl0ZW1EYXRhCiAgfTsKfTsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRWRpdEJvb2snLAogIGNvbXBvbmVudHM6IHsKICAgIFRvYXN0OiBUb2FzdAogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIF91c2VUb2FzdEVmZmVjdCA9IHVzZVRvYXN0RWZmZWN0KCksCiAgICAgICAgc2hvdyA9IF91c2VUb2FzdEVmZmVjdC5zaG93LAogICAgICAgIHRvYXN0TWVzc2FnZSA9IF91c2VUb2FzdEVmZmVjdC50b2FzdE1lc3NhZ2UsCiAgICAgICAgc2hvd1RvYXN0ID0gX3VzZVRvYXN0RWZmZWN0LnNob3dUb2FzdDsKCiAgICB2YXIgaGFuZGxlQmFja0NsaWNrID0gdXNlSGFuZGxlQmFjaygpOwoKICAgIHZhciBfdXNlQm9va0luZm9FZmZlY3QgPSB1c2VCb29rSW5mb0VmZmVjdCgpLAogICAgICAgIGl0ZW0gPSBfdXNlQm9va0luZm9FZmZlY3QuaXRlbSwKICAgICAgICBnZXRJdGVtRGF0YSA9IF91c2VCb29rSW5mb0VmZmVjdC5nZXRJdGVtRGF0YTsKCiAgICB2YXIgX3VzZVVwZGF0YUFkZHJlc3NFZmZlID0gdXNlVXBkYXRhQWRkcmVzc0VmZmVjdChzaG93VG9hc3QpLAogICAgICAgIGhhbmRsZVVwZGF0YSA9IF91c2VVcGRhdGFBZGRyZXNzRWZmZS5oYW5kbGVVcGRhdGEsCiAgICAgICAgdGFiID0gX3VzZVVwZGF0YUFkZHJlc3NFZmZlLnRhYiwKICAgICAgICBuYW1lID0gX3VzZVVwZGF0YUFkZHJlc3NFZmZlLm5hbWUsCiAgICAgICAgaW1nVXJsID0gX3VzZVVwZGF0YUFkZHJlc3NFZmZlLmltZ1VybCwKICAgICAgICBvbkNoYW5nZSA9IF91c2VVcGRhdGFBZGRyZXNzRWZmZS5vbkNoYW5nZTsKCiAgICBnZXRJdGVtRGF0YSgpOwogICAgcmV0dXJuIHsKICAgICAgaXRlbTogaXRlbSwKICAgICAgaGFuZGxlQmFja0NsaWNrOiBoYW5kbGVCYWNrQ2xpY2ssCiAgICAgIHNob3c6IHNob3csCiAgICAgIHRvYXN0TWVzc2FnZTogdG9hc3RNZXNzYWdlLAogICAgICBoYW5kbGVVcGRhdGE6IGhhbmRsZVVwZGF0YSwKICAgICAgdGFiOiB0YWIsCiAgICAgIG5hbWU6IG5hbWUsCiAgICAgIGltZ1VybDogaW1nVXJsLAogICAgICBvbkNoYW5nZTogb25DaGFuZ2UKICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\admin\\EditBook.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"wrapper\">\r\n    <div class=\"title\">\r\n      <div\r\n        class=\"iconfont title__back\"\r\n        @click=\"handleBackClick\"\r\n      >&#xe602;</div>\r\n      <div class=\"title__text\">\r\n        编辑书籍\r\n      </div>\r\n      <div\r\n        class=\"title__save\"\r\n        @click=\"handleUpdata\"\r\n      >修改</div>\r\n    </div>\r\n    <div class=\"form\">\r\n      <div class=\"form__item\">\r\n        <div class=\"form__item__label\">类别:</div>\r\n        <input\r\n          class=\"form__item__content\"\r\n          :placeholder=\"item.tab\"\r\n          v-model=\"tab\"\r\n        />\r\n      </div>\r\n      <div class=\"form__item\">\r\n        <div class=\"form__item__label\">书名:</div>\r\n        <input\r\n          class=\"form__item__content\"\r\n          :placeholder=\"item.name\"\r\n          v-model=\"name\"\r\n        />\r\n      </div>\r\n      <div class=\"form__item\">\r\n        <div class=\"form__item__label\">封面:</div>\r\n        <input\r\n          class=\"form__item__content\"\r\n          type=\"file\"\r\n          @change=\"onChange($event)\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <Toast\r\n    v-if=\"show\"\r\n    :message=\"toastMessage\"\r\n  />\r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRefs } from 'vue'\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport { post, get } from '../../utils/request'\r\nimport Toast, { useToastEffect } from '../../components/Toast'\r\n\r\n// 修改书籍逻辑\r\nconst useUpdataAddressEffect = (showToast) => {\r\n  const route = useRoute()\r\n  const router = useRouter()\r\n  const data = reactive({\r\n    tab: '',\r\n    name: '',\r\n    imgUrl: ''\r\n  })\r\n  const onChange = (e) => {\r\n    data.imgUrl = e.target.files[0].name\r\n  }\r\n  const handleUpdata = async () => {\r\n    try {\r\n      const result = await post('/updateBook', {\r\n        bookId: route.params.id,\r\n        tab: data.tab,\r\n        name: data.name,\r\n        imgUrl: data.imgUrl\r\n      })\r\n      if (result === 'ok') {\r\n        showToast('修改成功!')\r\n        setTimeout(() => {\r\n          router.push({ name: 'AllBook' })\r\n        }, 2000)\r\n      } else if (result === 'exist') {\r\n        showToast('该书名已存在!')\r\n      }\r\n    } catch (e) {\r\n      showToast('请求失败!')\r\n    }\r\n  }\r\n  const { tab, name, imgUrl } = toRefs(data)\r\n  return { handleUpdata, tab, name, imgUrl, onChange }\r\n}\r\n\r\n// 点击回退\r\nconst useHandleBack = () => {\r\n  const router = useRouter()\r\n  const handleBackClick = () => { router.back() }\r\n  return handleBackClick\r\n}\r\n\r\n// 获取当前书籍信息\r\nconst useBookInfoEffect = () => {\r\n  const route = useRoute()\r\n  const data = reactive({ item: {} })\r\n  const getItemData = async () => {\r\n    const result = await get('/theBook', { bookId: route.params.id })\r\n    data.item = result\r\n  }\r\n  const { item } = toRefs(data)\r\n  return { item, getItemData }\r\n}\r\n\r\nexport default {\r\n  name: 'EditBook',\r\n  components: { Toast },\r\n  setup () {\r\n    const { show, toastMessage, showToast } = useToastEffect()\r\n    const handleBackClick = useHandleBack()\r\n    const { item, getItemData } = useBookInfoEffect()\r\n    const { handleUpdata, tab, name, imgUrl, onChange } = useUpdataAddressEffect(showToast)\r\n    getItemData()\r\n    return { item, handleBackClick, show, toastMessage, handleUpdata, tab, name, imgUrl, onChange }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.wrapper {\r\n  overflow-y: auto;\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  background: #f8f8f8;\r\n}\r\n.title {\r\n  display: flex;\r\n  line-height: 0.44rem;\r\n  background: #fff;\r\n  font-size: 0.16rem;\r\n  color: #333;\r\n  text-align: center;\r\n  &__back {\r\n    width: 0.2rem;\r\n    margin-left: 0.18rem;\r\n    font-size: 0.2rem;\r\n    color: #b7b7b7;\r\n  }\r\n  &__text {\r\n    flex: 1;\r\n    text-align: center;\r\n  }\r\n  &__save {\r\n    margin-right: 0.2rem;\r\n    font-size: 0.14rem;\r\n  }\r\n}\r\n.form {\r\n  padding: 0 0.2rem;\r\n  margin-top: 0.12rem;\r\n  background: #fff;\r\n  border-top: 0.01rem solid #f1f1f1;\r\n  border-bottom: 0.01rem solid #f1f1f1;\r\n  &__item {\r\n    display: flex;\r\n    padding: 0.12rem 0;\r\n    line-height: 0.2rem;\r\n    font-size: 0.14rem;\r\n    border-bottom: 0.01rem solid #f1f1f1;\r\n    &:last-of-type {\r\n      border-bottom: none;\r\n    }\r\n    &__label {\r\n      margin-right: 0.05rem;\r\n      color: #666;\r\n    }\r\n    &__content {\r\n      flex: 1;\r\n      border: none;\r\n      outline: none;\r\n      color: #3f3f3f;\r\n      &::placeholder {\r\n        color: #3f3f3f;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":""}]}