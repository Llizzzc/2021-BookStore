{"remainingRequest":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\admin\\TheShop.vue?vue&type=template&id=55eeb4a2&scoped=true","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\admin\\TheShop.vue","mtime":1620224040083},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCByZXNvbHZlQ29tcG9uZW50IGFzIF9yZXNvbHZlQ29tcG9uZW50LCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrLCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCB3aXRoU2NvcGVJZCBhcyBfd2l0aFNjb3BlSWQsIHB1c2hTY29wZUlkIGFzIF9wdXNoU2NvcGVJZCwgcG9wU2NvcGVJZCBhcyBfcG9wU2NvcGVJZCB9IGZyb20gInZ1ZSI7Cgp2YXIgX3dpdGhJZCA9IC8qI19fUFVSRV9fKi9fd2l0aFNjb3BlSWQoImRhdGEtdi01NWVlYjRhMiIpOwoKX3B1c2hTY29wZUlkKCJkYXRhLXYtNTVlZWI0YTIiKTsKCnZhciBfaG9pc3RlZF8xID0gewogIGNsYXNzOiAid2FycHBlciIKfTsKdmFyIF9ob2lzdGVkXzIgPSB7CiAgY2xhc3M6ICJzZWFyY2giCn07CgpfcG9wU2NvcGVJZCgpOwoKZXhwb3J0IHZhciByZW5kZXIgPSAvKiNfX1BVUkVfXyovX3dpdGhJZChmdW5jdGlvbiAoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgdmFyIF9jb21wb25lbnRfU2hvcEluZm8gPSBfcmVzb2x2ZUNvbXBvbmVudCgiU2hvcEluZm8iKTsKCiAgdmFyIF9jb21wb25lbnRfU2hvcENvbnRlbnQgPSBfcmVzb2x2ZUNvbXBvbmVudCgiU2hvcENvbnRlbnQiKTsKCiAgdmFyIF9jb21wb25lbnRfVG9hc3QgPSBfcmVzb2x2ZUNvbXBvbmVudCgiVG9hc3QiKTsKCiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9GcmFnbWVudCwgbnVsbCwgW19jcmVhdGVWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMSwgW19jcmVhdGVWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMiwgW19jcmVhdGVWTm9kZSgiZGl2IiwgewogICAgY2xhc3M6ICJzZWFyY2hfX2JhY2sgaWNvbmZvbnQiLAogICAgb25DbGljazogX2NhY2hlWzFdIHx8IChfY2FjaGVbMV0gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAkc2V0dXAuaGFuZGxlQmFja0NsaWNrICYmICRzZXR1cC5oYW5kbGVCYWNrQ2xpY2suYXBwbHkoJHNldHVwLCBhcmd1bWVudHMpOwogICAgfSkKICB9LCAi7piCIildKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfU2hvcEluZm8sIHsKICAgIGl0ZW06ICRzZXR1cC5pdGVtLAogICAgaGlkZUJvcmRlcjogdHJ1ZQogIH0sIG51bGwsIDgsIFsiaXRlbSJdKSwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfU2hvcENvbnRlbnQpLCAkc2V0dXAuc2hvdyA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X1RvYXN0LCB7CiAgICBrZXk6IDAsCiAgICBtZXNzYWdlOiAkc2V0dXAudG9hc3RNZXNzYWdlCiAgfSwgbnVsbCwgOCwgWyJtZXNzYWdlIl0pKSA6IF9jcmVhdGVDb21tZW50Vk5vZGUoIiIsIHRydWUpXSksIF9jcmVhdGVWTm9kZSgiZGl2IiwgewogICAgY2xhc3M6ICJhZGQiLAogICAgb25DbGljazogX2NhY2hlWzJdIHx8IChfY2FjaGVbMl0gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAkc2V0dXAuaGFuZGxlQWRkICYmICRzZXR1cC5oYW5kbGVBZGQuYXBwbHkoJHNldHVwLCBhcmd1bWVudHMpOwogICAgfSkKICB9LCAi5aKe5Yqg5Lmm57GNIildLCA2NCk7Cn0pOw=="},{"version":3,"sources":["C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\admin\\TheShop.vue"],"names":[],"mappings":";;;;;;;AACO,EAAA,KAAK,EAAC;;;AACJ,EAAA,KAAK,EAAC;;;;;;;;;;;;sDADb,YAAA,CAgBM,KAhBN,EAAA,UAAA,EAgBM,CAfJ,YAAA,CAKM,KALN,EAAA,UAAA,EAKM,CAJJ,YAAA,CAGe,KAHf,EAGe;AAFb,IAAA,KAAK,EAAC,uBAEO;AADZ,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,MAAA,CAAA,eAAA,IAAA,MAAA,CAAA,eAAA,OAAA,MAAA,YAAF;AAAA,KAAA;AACO,GAHf,EAGC,GAHD,CAII,CALN,CAeI,EATJ,YAAA,CAGE,mBAHF,EAGE;AAFC,IAAA,IAAI,EAAE,MAAA,CAAA,IAEP;AADC,IAAA,UAAU,EAAE;AACb,GAHF,E,IAAA,E,CAAA,E,QAAA,CASI,EALJ,YAAA,CAAe,sBAAf,CAKI,EAHI,MAAA,CAAA,I,kBADR,YAAA,CAGE,gBAHF,EAGE;UAAA;AADC,IAAA,OAAO,EAAE,MAAA,CAAA;AACV,GAHF,E,IAAA,E,CAAA,E,WAAA,C,iCAII,CAhBN,C,EAiBA,YAAA,CAGW,KAHX,EAGW;AAFT,IAAA,KAAK,EAAC,KAEG;AADR,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,MAAA,CAAA,SAAA,IAAA,MAAA,CAAA,SAAA,OAAA,MAAA,YAAF;AAAA,KAAA;AACG,GAHX,EAGC,MAHD,C","sourcesContent":["<template>\r\n  <div class=\"warpper\">\r\n    <div class=\"search\">\r\n      <div\r\n        class=\"search__back iconfont\"\r\n        @click=\"handleBackClick\"\r\n      >&#xe602;</div>\r\n    </div>\r\n    <ShopInfo\r\n      :item=\"item\"\r\n      :hideBorder=\"true\"\r\n    />\r\n    <ShopContent />\r\n    <Toast\r\n      v-if=\"show\"\r\n      :message=\"toastMessage\"\r\n    />\r\n  </div>\r\n  <div\r\n    class=\"add\"\r\n    @click=\"handleAdd\"\r\n  >增加书籍</div>\r\n</template>\r\n\r\n<script>\r\nimport { get, post } from '../../utils/request'\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport { reactive, toRefs } from 'vue'\r\nimport ShopInfo from '../../components/ShopInfo'\r\nimport ShopContent from '../admin/ShopContent'\r\nimport Toast, { useToastEffect } from '../../components/Toast'\r\n\r\n// 获取当前商铺信息\r\nconst useShopInfoEffect = () => {\r\n  const route = useRoute()\r\n  const data = reactive({ item: {} })\r\n  const getItemData = async () => {\r\n    const result = await get('/showShop', { id: route.params.id })\r\n    data.item = result\r\n  }\r\n  const { item } = toRefs(data)\r\n  return { item, getItemData }\r\n}\r\n\r\n// 点击回退\r\nconst useBackRouterEffect = () => {\r\n  const router = useRouter()\r\n  const handleBackClick = () => {\r\n    router.back()\r\n  }\r\n  return { handleBackClick }\r\n}\r\n\r\n// 点击搜索\r\nconst useSearchEffect = (showToast) => {\r\n  const route = useRoute()\r\n  const shopId = route.params.id\r\n  const data = reactive({\r\n    name: '',\r\n    tab: 0\r\n  })\r\n  const handleSearchClick = async () => {\r\n    if (data.name === '') {\r\n      showToast('请输入商品名称!')\r\n    } else {\r\n      try {\r\n        const result = await post('/search', {\r\n          id: shopId,\r\n          name: data.name\r\n        })\r\n        if (result === 'None') {\r\n          showToast('未找到该书籍!')\r\n        } else {\r\n          data.tab = result\r\n        }\r\n      } catch (e) {\r\n        showToast('请求失败!')\r\n      }\r\n    }\r\n  }\r\n  const { name, tab } = toRefs(data)\r\n  return { handleSearchClick, name, tab }\r\n}\r\n\r\n// 增加书籍逻辑\r\nconst useAddBook = () => {\r\n  const router = useRouter()\r\n  const route = useRoute()\r\n  const handleAdd = () => {\r\n    router.push(`/AddShopBook/${route.params.id}`)\r\n  }\r\n  return handleAdd\r\n}\r\n\r\nexport default {\r\n  name: 'TheShop',\r\n  components: { ShopInfo, ShopContent, Toast },\r\n  setup () {\r\n    const { show, toastMessage, showToast } = useToastEffect()\r\n    const { handleBackClick } = useBackRouterEffect()\r\n    const { item, getItemData } = useShopInfoEffect()\r\n    const handleAdd = useAddBook()\r\n    const { handleSearchClick, name, tab } = useSearchEffect(showToast)\r\n    getItemData()\r\n    return { item, handleBackClick, handleSearchClick, show, toastMessage, name, tab, handleAdd }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.wrapper {\r\n  padding: 0 0.18rem;\r\n}\r\n\r\n.search {\r\n  display: flex;\r\n  margin: 0.2rem 0 0.16rem 0;\r\n  &__back {\r\n    width: 0.3rem;\r\n    font-size: 0.3rem;\r\n    color: #b6b6b6;\r\n  }\r\n}\r\n.add {\r\n  position: absolute;\r\n  width: 100%;\r\n  bottom: 0;\r\n  line-height: 0.32rem;\r\n  background: #0091ff;\r\n  color: #f8f8f8;\r\n  text-align: center;\r\n  border-radius: 0.04rem;\r\n}\r\n</style>\r\n"],"sourceRoot":""}]}