{"remainingRequest":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\login\\Login.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\login\\Login.vue","mtime":1618208361550},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2FkbWluL0Rlc2t0b3AvbHpjX3dlYnNpdGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgeyByZWFjdGl2ZSwgdG9SZWZzIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgcG9zdCB9IGZyb20gJy4uLy4uL3V0aWxzL3JlcXVlc3QnOwppbXBvcnQgVG9hc3QsIHsgdXNlVG9hc3RFZmZlY3QgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL1RvYXN0JzsgLy8g55m76ZmG6YC76L6RCgp2YXIgdXNlTG9naW5FZmZlY3QgPSBmdW5jdGlvbiB1c2VMb2dpbkVmZmVjdChzaG93VG9hc3QpIHsKICB2YXIgcm91dGVyID0gdXNlUm91dGVyKCk7CiAgdmFyIGRhdGEgPSByZWFjdGl2ZSh7CiAgICB1c2VybmFtZTogJycsCiAgICBwYXNzd29yZDogJycKICB9KTsKCiAgdmFyIGhhbmRsZUxvZ2luID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgcmVzdWx0LCB1c2VySW5mbzsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmICghKGRhdGEudXNlcm5hbWUgPT09ICcnIHx8IGRhdGEucGFzc3dvcmQgPT09ICcnKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHNob3dUb2FzdCgn55So5oi35ZCN5oiW5a+G56CB5LiN6IO95Li656m6IScpOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gcG9zdCgnL2xvZ2luJywgewogICAgICAgICAgICAgICAgdXNlcm5hbWU6IGRhdGEudXNlcm5hbWUsCiAgICAgICAgICAgICAgICBwYXNzd29yZDogZGF0YS5wYXNzd29yZAogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ICE9PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmlzTG9naW4gPSB0cnVlOwogICAgICAgICAgICAgICAgdXNlckluZm8gPSB7CiAgICAgICAgICAgICAgICAgIGlkOiByZXN1bHQuaWQsCiAgICAgICAgICAgICAgICAgIG5hbWU6IHJlc3VsdC51c2VybmFtZQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyJywgSlNPTi5zdHJpbmdpZnkodXNlckluZm8pKTsKICAgICAgICAgICAgICAgIHNob3dUb2FzdCgn55m75b2V5oiQ5YqfIScpOwogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAnSG9tZScKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9LCAyMDAwKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCA9PT0gJ2Vycm9yJykgewogICAgICAgICAgICAgICAgc2hvd1RvYXN0KCfnlKjmiLflkI3miJblr4bnoIHplJnor68hJyk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgPT09ICdub25lJykgewogICAgICAgICAgICAgICAgc2hvd1RvYXN0KCfml6DmraTnlKjmiLfvvIzor7fnq4vljbPms6jlhowhJyk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMTsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDQpOwogICAgICAgICAgICAgIHNob3dUb2FzdCgn6K+35rGC5aSx6LSlIScpOwoKICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1s0LCAxMV1dKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlTG9naW4oKSB7CiAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKCiAgdmFyIF90b1JlZnMgPSB0b1JlZnMoZGF0YSksCiAgICAgIHVzZXJuYW1lID0gX3RvUmVmcy51c2VybmFtZSwKICAgICAgcGFzc3dvcmQgPSBfdG9SZWZzLnBhc3N3b3JkOwoKICByZXR1cm4gewogICAgdXNlcm5hbWU6IHVzZXJuYW1lLAogICAgcGFzc3dvcmQ6IHBhc3N3b3JkLAogICAgaGFuZGxlTG9naW46IGhhbmRsZUxvZ2luCiAgfTsKfTsgLy8g5rOo5YaM6Lez6L2sCgoKdmFyIHVzZVJlZ2lzdGVyRWZmZWN0ID0gZnVuY3Rpb24gdXNlUmVnaXN0ZXJFZmZlY3QoKSB7CiAgdmFyIHJvdXRlciA9IHVzZVJvdXRlcigpOwoKICB2YXIgaGFuZGxlUmVnaXN0ZXJDbGljayA9IGZ1bmN0aW9uIGhhbmRsZVJlZ2lzdGVyQ2xpY2soKSB7CiAgICByb3V0ZXIucHVzaCh7CiAgICAgIG5hbWU6ICdSZWdpc3RlcicKICAgIH0pOwogIH07CgogIHJldHVybiB7CiAgICBoYW5kbGVSZWdpc3RlckNsaWNrOiBoYW5kbGVSZWdpc3RlckNsaWNrCiAgfTsKfTsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTG9naW4nLAogIGNvbXBvbmVudHM6IHsKICAgIFRvYXN0OiBUb2FzdAogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIF91c2VUb2FzdEVmZmVjdCA9IHVzZVRvYXN0RWZmZWN0KCksCiAgICAgICAgc2hvdyA9IF91c2VUb2FzdEVmZmVjdC5zaG93LAogICAgICAgIHRvYXN0TWVzc2FnZSA9IF91c2VUb2FzdEVmZmVjdC50b2FzdE1lc3NhZ2UsCiAgICAgICAgc2hvd1RvYXN0ID0gX3VzZVRvYXN0RWZmZWN0LnNob3dUb2FzdDsKCiAgICB2YXIgX3VzZUxvZ2luRWZmZWN0ID0gdXNlTG9naW5FZmZlY3Qoc2hvd1RvYXN0KSwKICAgICAgICB1c2VybmFtZSA9IF91c2VMb2dpbkVmZmVjdC51c2VybmFtZSwKICAgICAgICBwYXNzd29yZCA9IF91c2VMb2dpbkVmZmVjdC5wYXNzd29yZCwKICAgICAgICBoYW5kbGVMb2dpbiA9IF91c2VMb2dpbkVmZmVjdC5oYW5kbGVMb2dpbjsKCiAgICB2YXIgX3VzZVJlZ2lzdGVyRWZmZWN0ID0gdXNlUmVnaXN0ZXJFZmZlY3QoKSwKICAgICAgICBoYW5kbGVSZWdpc3RlckNsaWNrID0gX3VzZVJlZ2lzdGVyRWZmZWN0LmhhbmRsZVJlZ2lzdGVyQ2xpY2s7CgogICAgcmV0dXJuIHsKICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLAogICAgICBwYXNzd29yZDogcGFzc3dvcmQsCiAgICAgIGhhbmRsZUxvZ2luOiBoYW5kbGVMb2dpbiwKICAgICAgaGFuZGxlUmVnaXN0ZXJDbGljazogaGFuZGxlUmVnaXN0ZXJDbGljaywKICAgICAgc2hvdzogc2hvdywKICAgICAgdG9hc3RNZXNzYWdlOiB0b2FzdE1lc3NhZ2UKICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\login\\Login.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <img\n      class=\"wrapper__img\"\n      src=\"../../img/others/2.jpg\"\n    />\n    <div class=\"wrapper__input\">\n      <input\n        class=\"wrapper__input__content\"\n        placeholder=\"请输入用户名\"\n        v-model=\"username\"\n      />\n    </div>\n    <div class=\"wrapper__input\">\n      <input\n        type=\"password\"\n        class=\"wrapper__input__content\"\n        placeholder=\"请输入密码\"\n        v-model=\"password\"\n        autocomplete=\"new-password\"\n      />\n    </div>\n    <div\n      class=\"wrapper__login-button\"\n      @click=\"handleLogin\"\n    >登陆</div>\n    <div\n      class=\"wrapper__login-link\"\n      @click=\"handleRegisterClick\"\n    >立即注册</div>\n    <Toast\n      v-if=\"show\"\n      :message=\"toastMessage\"\n    />\n  </div>\n</template>\n\n<script>\nimport { useRouter } from 'vue-router'\nimport { reactive, toRefs } from 'vue'\nimport { post } from '../../utils/request'\nimport Toast, { useToastEffect } from '../../components/Toast'\n\n// 登陆逻辑\nconst useLoginEffect = (showToast) => {\n  const router = useRouter()\n  const data = reactive({\n    username: '',\n    password: ''\n  })\n  const handleLogin = async () => {\n    if (data.username === '' || data.password === '') {\n      showToast('用户名或密码不能为空!')\n    } else {\n      try {\n        const result = await post('/login', {\n          username: data.username,\n          password: data.password\n        })\n        if (typeof result !== 'string') {\n          localStorage.isLogin = true\n          const userInfo = {\n            id: result.id,\n            name: result.username\n          }\n          localStorage.setItem('user', JSON.stringify(userInfo))\n          showToast('登录成功!')\n          setTimeout(() => {\n            router.push({ name: 'Home' })\n          }, 2000)\n        } else if (result === 'error') {\n          showToast('用户名或密码错误!')\n        } else if (result === 'none') {\n          showToast('无此用户，请立即注册!')\n        }\n      } catch (e) {\n        showToast('请求失败!')\n      }\n    }\n  }\n  const { username, password } = toRefs(data)\n  return { username, password, handleLogin }\n}\n\n// 注册跳转\nconst useRegisterEffect = () => {\n  const router = useRouter()\n  const handleRegisterClick = () => {\n    router.push({ name: 'Register' })\n  }\n  return { handleRegisterClick }\n}\n\nexport default {\n  name: 'Login',\n  components: { Toast },\n  setup () {\n    const { show, toastMessage, showToast } = useToastEffect()\n    const { username, password, handleLogin } = useLoginEffect(showToast)\n    const { handleRegisterClick } = useRegisterEffect()\n    return { username, password, handleLogin, handleRegisterClick, show, toastMessage }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.wrapper {\n  position: absolute;\n  top: 50%;\n  left: 0;\n  right: 0;\n  transform: translateY(-50%);\n  &__img {\n    display: block;\n    margin: 0 auto 0.4rem auto;\n    width: 0.68rem;\n    height: 0.68rem;\n  }\n  &__input {\n    height: 0.48rem;\n    margin: 0 0.4rem 0.16rem 0.4rem;\n    padding: 0 0.16rem;\n    background: #f9f9f9;\n    border: .01rem solid rgba(0, 0, 0, 0.1);\n    border-radius: .06rem;\n    &__content {\n      margin-top: .12rem;\n      line-height: 0.22rem;\n      border: none;\n      outline: none;\n      width: 100%;\n      background: none;\n      font-size: 0.16rem;\n      color: rgba(0, 0, 0, 0.5);\n      &::placeholder {\n        color: rgba(0, 0, 0, 0.5);\n      }\n    }\n  }\n  &__login-button {\n    margin: 0.32rem 0.4rem 0 0.4rem;\n    line-height: 0.48rem;\n    background: #0091ff;\n    box-shadow: 0 0.04rem 0.08rem 0 rgba(0, 145, 255, 0.32);\n    border-radius: 0.04rem;\n    border-radius: 0.04rem;\n    color: #fff;\n    font-size: 0.16rem;\n    text-align: center;\n  }\n  &__login-link {\n    margin-top: 0.2rem;\n    text-align: center;\n    font-size: 0.14rem;\n    color: #777;\n  }\n}\n</style>\n"],"sourceRoot":""}]}