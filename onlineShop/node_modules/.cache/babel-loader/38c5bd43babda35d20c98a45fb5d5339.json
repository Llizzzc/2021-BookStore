{"remainingRequest":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\login\\Login.vue?vue&type=template&id=2529d779&scoped=true","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\login\\Login.vue","mtime":1622788549280},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCB2TW9kZWxUZXh0IGFzIF92TW9kZWxUZXh0LCB3aXRoRGlyZWN0aXZlcyBhcyBfd2l0aERpcmVjdGl2ZXMsIHJlc29sdmVDb21wb25lbnQgYXMgX3Jlc29sdmVDb21wb25lbnQsIG9wZW5CbG9jayBhcyBfb3BlbkJsb2NrLCBjcmVhdGVCbG9jayBhcyBfY3JlYXRlQmxvY2ssIGNyZWF0ZUNvbW1lbnRWTm9kZSBhcyBfY3JlYXRlQ29tbWVudFZOb2RlLCB3aXRoU2NvcGVJZCBhcyBfd2l0aFNjb3BlSWQsIHB1c2hTY29wZUlkIGFzIF9wdXNoU2NvcGVJZCwgcG9wU2NvcGVJZCBhcyBfcG9wU2NvcGVJZCB9IGZyb20gInZ1ZSI7CmltcG9ydCBfaW1wb3J0c18wIGZyb20gJy4uLy4uL2ltZy9vdGhlcnMvMi5qcGcnOwoKdmFyIF93aXRoSWQgPSAvKiNfX1BVUkVfXyovX3dpdGhTY29wZUlkKCJkYXRhLXYtMjUyOWQ3NzkiKTsKCl9wdXNoU2NvcGVJZCgiZGF0YS12LTI1MjlkNzc5Iik7Cgp2YXIgX2hvaXN0ZWRfMSA9IHsKICBjbGFzczogIndyYXBwZXIiCn07Cgp2YXIgX2hvaXN0ZWRfMiA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVk5vZGUoImltZyIsIHsKICBjbGFzczogIndyYXBwZXJfX2ltZyIsCiAgc3JjOiBfaW1wb3J0c18wCn0sIG51bGwsIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF8zID0gewogIGNsYXNzOiAid3JhcHBlcl9faW5wdXQiCn07CnZhciBfaG9pc3RlZF80ID0gewogIGNsYXNzOiAid3JhcHBlcl9faW5wdXQiCn07CgpfcG9wU2NvcGVJZCgpOwoKZXhwb3J0IHZhciByZW5kZXIgPSAvKiNfX1BVUkVfXyovX3dpdGhJZChmdW5jdGlvbiAoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgdmFyIF9jb21wb25lbnRfVG9hc3QgPSBfcmVzb2x2ZUNvbXBvbmVudCgiVG9hc3QiKTsKCiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xLCBbX2hvaXN0ZWRfMiwgX2NyZWF0ZVZOb2RlKCJkaXYiLCBfaG9pc3RlZF8zLCBbX3dpdGhEaXJlY3RpdmVzKF9jcmVhdGVWTm9kZSgiaW5wdXQiLCB7CiAgICBjbGFzczogIndyYXBwZXJfX2lucHV0X19jb250ZW50IiwKICAgIHBsYWNlaG9sZGVyOiAi6K+36L6T5YWl55So5oi35ZCNIiwKICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzFdIHx8IChfY2FjaGVbMV0gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgIHJldHVybiAkc2V0dXAudXNlcm5hbWUgPSAkZXZlbnQ7CiAgICB9KQogIH0sIG51bGwsIDUxMgogIC8qIE5FRURfUEFUQ0ggKi8KICApLCBbW192TW9kZWxUZXh0LCAkc2V0dXAudXNlcm5hbWVdXSldKSwgX2NyZWF0ZVZOb2RlKCJkaXYiLCBfaG9pc3RlZF80LCBbX3dpdGhEaXJlY3RpdmVzKF9jcmVhdGVWTm9kZSgiaW5wdXQiLCB7CiAgICB0eXBlOiAicGFzc3dvcmQiLAogICAgY2xhc3M6ICJ3cmFwcGVyX19pbnB1dF9fY29udGVudCIsCiAgICBwbGFjZWhvbGRlcjogIuivt+i+k+WFpeWvhueggSIsCiAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVsyXSB8fCAoX2NhY2hlWzJdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICByZXR1cm4gJHNldHVwLnBhc3N3b3JkID0gJGV2ZW50OwogICAgfSkKICB9LCBudWxsLCA1MTIKICAvKiBORUVEX1BBVENIICovCiAgKSwgW1tfdk1vZGVsVGV4dCwgJHNldHVwLnBhc3N3b3JkXV0pXSksIF9jcmVhdGVWTm9kZSgiZGl2IiwgewogICAgY2xhc3M6ICJ3cmFwcGVyX19sb2dpbi1idXR0b24iLAogICAgb25DbGljazogX2NhY2hlWzNdIHx8IChfY2FjaGVbM10gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAkc2V0dXAuaGFuZGxlTG9naW4gJiYgJHNldHVwLmhhbmRsZUxvZ2luLmFwcGx5KCRzZXR1cCwgYXJndW1lbnRzKTsKICAgIH0pCiAgfSwgIueZu+W9lSIpLCBfY3JlYXRlVk5vZGUoImRpdiIsIHsKICAgIGNsYXNzOiAid3JhcHBlcl9fbG9naW4tbGluayIsCiAgICBvbkNsaWNrOiBfY2FjaGVbNF0gfHwgKF9jYWNoZVs0XSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICRzZXR1cC5oYW5kbGVSZWdpc3RlckNsaWNrICYmICRzZXR1cC5oYW5kbGVSZWdpc3RlckNsaWNrLmFwcGx5KCRzZXR1cCwgYXJndW1lbnRzKTsKICAgIH0pCiAgfSwgIueri+WNs+azqOWGjCIpLCBfY3JlYXRlVk5vZGUoImRpdiIsIHsKICAgIGNsYXNzOiAid3JhcHBlcl9fYWRtaW4tbGluayIsCiAgICBvbkNsaWNrOiBfY2FjaGVbNV0gfHwgKF9jYWNoZVs1XSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICRzZXR1cC5oYW5kbGVBZG1pbkNsaWNrICYmICRzZXR1cC5oYW5kbGVBZG1pbkNsaWNrLmFwcGx5KCRzZXR1cCwgYXJndW1lbnRzKTsKICAgIH0pCiAgfSwgIueuoeeQhuWRmOeZu+W9lSIpLCAkc2V0dXAuc2hvdyA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X1RvYXN0LCB7CiAgICBrZXk6IDAsCiAgICBtZXNzYWdlOiAkc2V0dXAudG9hc3RNZXNzYWdlCiAgfSwgbnVsbCwgOAogIC8qIFBST1BTICovCiAgLCBbIm1lc3NhZ2UiXSkpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgidi1pZiIsIHRydWUpXSk7Cn0pOw=="},{"version":3,"sources":["C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\login\\Login.vue"],"names":[],"mappings":";OAIM,U,MAA4B,wB;;;;;;;AAH3B,EAAA,KAAK,EAAC;;;8BACT,YAAA,CAGE,KAHF,EAGE;AAFA,EAAA,KAAK,EAAC,cAEN;AADA,EAAA,GAA4B,EAA5B;AACA,CAHF,E,IAAA,E;;AAAA,C;;;AAIK,EAAA,KAAK,EAAC;;;AAON,EAAA,KAAK,EAAC;;;;;;;;uBAZb,YAAA,CAoCM,KApCN,EAAA,UAAA,EAoCM,CAnCJ,UAmCI,EA/BJ,YAAA,CAMM,KANN,EAAA,UAAA,EAMM,C,gBALJ,YAAA,CAIE,OAJF,EAIE;AAHA,IAAA,KAAK,EAAC,yBAGN;AAFA,IAAA,WAAW,EAAC,QAEZ;;aADS,MAAA,CAAA,QAAA,GAAQ,M;;AACjB,GAJF,E,IAAA,E;;AAAA,G,iBAGW,MAAA,CAAA,Q,GAEP,CANN,CA+BI,EAxBJ,YAAA,CAOM,KAPN,EAAA,UAAA,EAOM,C,gBANJ,YAAA,CAKE,OALF,EAKE;AAJA,IAAA,IAAI,EAAC,UAIL;AAHA,IAAA,KAAK,EAAC,yBAGN;AAFA,IAAA,WAAW,EAAC,OAEZ;;aADS,MAAA,CAAA,QAAA,GAAQ,M;;AACjB,GALF,E,IAAA,E;;AAAA,G,iBAIW,MAAA,CAAA,Q,GAEP,CAPN,CAwBI,EAhBJ,YAAA,CAGS,KAHT,EAGS;AAFP,IAAA,KAAK,EAAC,uBAEC;AADN,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,MAAA,CAAA,WAAA,IAAA,MAAA,CAAA,WAAA,OAAA,MAAA,YAAF;AAAA,KAAA;AACC,GAHT,EAGC,IAHD,CAgBI,EAZJ,YAAA,CAGW,KAHX,EAGW;AAFT,IAAA,KAAK,EAAC,qBAEG;AADR,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,MAAA,CAAA,mBAAA,IAAA,MAAA,CAAA,mBAAA,OAAA,MAAA,YAAF;AAAA,KAAA;AACG,GAHX,EAGC,MAHD,CAYI,EARJ,YAAA,CAGY,KAHZ,EAGY;AAFV,IAAA,KAAK,EAAC,qBAEI;AADT,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,MAAA,CAAA,gBAAA,IAAA,MAAA,CAAA,gBAAA,OAAA,MAAA,YAAF;AAAA,KAAA;AACI,GAHZ,EAGC,OAHD,CAQI,EAHI,MAAA,CAAA,I,kBADR,YAAA,CAGE,gBAHF,EAGE;UAAA;AADC,IAAA,OAAO,EAAE,MAAA,CAAA;AACV,GAHF,E,IAAA,E;;AAAA,I,WAAA,C,qCAII,CApCN,C","sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <img\n      class=\"wrapper__img\"\n      src=\"../../img/others/2.jpg\"\n    />\n    <div class=\"wrapper__input\">\n      <input\n        class=\"wrapper__input__content\"\n        placeholder=\"请输入用户名\"\n        v-model=\"username\"\n      />\n    </div>\n    <div class=\"wrapper__input\">\n      <input\n        type=\"password\"\n        class=\"wrapper__input__content\"\n        placeholder=\"请输入密码\"\n        v-model=\"password\"\n      />\n    </div>\n    <div\n      class=\"wrapper__login-button\"\n      @click=\"handleLogin\"\n    >登录</div>\n    <div\n      class=\"wrapper__login-link\"\n      @click=\"handleRegisterClick\"\n    >立即注册</div>\n    <div\n      class=\"wrapper__admin-link\"\n      @click=\"handleAdminClick\"\n    >管理员登录</div>\n    <Toast\n      v-if=\"show\"\n      :message=\"toastMessage\"\n    />\n  </div>\n</template>\n\n<script>\nimport { useRouter } from 'vue-router'\nimport { reactive, toRefs } from 'vue'\nimport { post } from '../../utils/request'\nimport Toast, { useToastEffect } from '../../components/Toast'\n\n// 登录逻辑\nconst useLoginEffect = (showToast) => {\n  const router = useRouter()\n  const data = reactive({\n    username: '',\n    password: ''\n  })\n  const handleLogin = async () => {\n    if (data.username === '' || data.password === '') {\n      showToast('用户名或密码不能为空!')\n    } else {\n      try {\n        const result = await post('/login', {\n          username: data.username,\n          password: data.password\n        })\n        if (typeof result !== 'string') {\n          localStorage.isLogin = true\n          const userInfo = {\n            id: result.id,\n            name: result.username\n          }\n          localStorage.setItem('user', JSON.stringify(userInfo))\n          showToast('登录成功!')\n          setTimeout(() => {\n            router.push({ name: 'Home' })\n          }, 2000)\n        } else if (result === 'error') {\n          showToast('用户名或密码错误!')\n          data.password = ''\n          data.username = ''\n        } else if (result === 'none') {\n          showToast('无此用户，请立即注册!')\n          data.username = ''\n          data.password = ''\n        }\n      } catch (e) {\n        showToast('请求失败!')\n      }\n    }\n  }\n  const { username, password } = toRefs(data)\n  return { username, password, handleLogin }\n}\n\n// 注册跳转\nconst useRegisterEffect = () => {\n  const router = useRouter()\n  const handleRegisterClick = () => {\n    router.push({ name: 'Register' })\n  }\n  return { handleRegisterClick }\n}\n\n// 管理员跳转\nconst useAdminEffect = () => {\n  const router = useRouter()\n  const handleAdminClick = () => {\n    router.push({ name: 'Admin' })\n  }\n  return { handleAdminClick }\n}\n\nexport default {\n  name: 'Login',\n  components: { Toast },\n  setup () {\n    const { show, toastMessage, showToast } = useToastEffect()\n    const { username, password, handleLogin } = useLoginEffect(showToast)\n    const { handleRegisterClick } = useRegisterEffect()\n    const { handleAdminClick } = useAdminEffect()\n    return { username, password, handleLogin, handleRegisterClick, show, toastMessage, handleAdminClick }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.wrapper {\n  position: absolute;\n  top: 50%;\n  left: 0;\n  right: 0;\n  transform: translateY(-50%);\n  &__img {\n    display: block;\n    margin: 0 auto 0.4rem auto;\n    width: 0.68rem;\n    height: 0.68rem;\n  }\n  &__input {\n    height: 0.48rem;\n    margin: 0 0.4rem 0.16rem 0.4rem;\n    padding: 0 0.16rem;\n    background: #f9f9f9;\n    border: 0.01rem solid rgba(0, 0, 0, 0.1);\n    border-radius: 0.06rem;\n    &__content {\n      margin-top: 0.12rem;\n      line-height: 0.22rem;\n      border: none;\n      outline: none;\n      width: 100%;\n      background: none;\n      font-size: 0.16rem;\n      color: rgba(0, 0, 0, 0.5);\n      &::placeholder {\n        color: rgba(0, 0, 0, 0.5);\n      }\n    }\n  }\n  &__login-button {\n    margin: 0.32rem 0.4rem 0 0.4rem;\n    line-height: 0.48rem;\n    background: #0091ff;\n    box-shadow: 0 0.04rem 0.08rem 0 rgba(0, 145, 255, 0.32);\n    border-radius: 0.04rem;\n    border-radius: 0.04rem;\n    color: #fff;\n    font-size: 0.16rem;\n    text-align: center;\n  }\n  &__login-link {\n    margin-top: 0.2rem;\n    text-align: center;\n    font-size: 0.14rem;\n    color: #777;\n  }\n  &__admin-link {\n    margin-top: 0.2rem;\n    text-align: center;\n    font-size: 0.14rem;\n    font-weight: bold;\n    color: rebeccapurple;\n  }\n}\n</style>\n"],"sourceRoot":""}]}