{"remainingRequest":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\usernameChange\\UsernameChange.vue?vue&type=style&index=0&id=3b82ca25&lang=scss&scoped=true","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\usernameChange\\UsernameChange.vue","mtime":1622787095625},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoud3JhcHBlciB7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgdG9wOiA1MCU7DQogIGxlZnQ6IDA7DQogIHJpZ2h0OiAwOw0KICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7DQogICZfX2lucHV0IHsNCiAgICBoZWlnaHQ6IDAuNDhyZW07DQogICAgbWFyZ2luOiAwIDAuNHJlbSAwLjE2cmVtIDAuNHJlbTsNCiAgICBwYWRkaW5nOiAwIDAuMTZyZW07DQogICAgYmFja2dyb3VuZDogI2Y5ZjlmOTsNCiAgICBib3JkZXI6IDAuMDFyZW0gc29saWQgcmdiYSgwLCAwLCAwLCAwLjEpOw0KICAgIGJvcmRlci1yYWRpdXM6IDAuMDZyZW07DQogICAgJl9fY29udGVudCB7DQogICAgICBtYXJnaW4tdG9wOiAwLjEycmVtOw0KICAgICAgbGluZS1oZWlnaHQ6IDAuMjJyZW07DQogICAgICBib3JkZXI6IG5vbmU7DQogICAgICBvdXRsaW5lOiBub25lOw0KICAgICAgd2lkdGg6IDEwMCU7DQogICAgICBiYWNrZ3JvdW5kOiBub25lOw0KICAgICAgZm9udC1zaXplOiAwLjE2cmVtOw0KICAgICAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC41KTsNCiAgICAgICY6OnBsYWNlaG9sZGVyIHsNCiAgICAgICAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC41KTsNCiAgICAgIH0NCiAgICB9DQogIH0NCiAgJl9fY2hhbmdlLWJ1dHRvbiB7DQogICAgbWFyZ2luOiAwLjMycmVtIDAuNHJlbSAwIDAuNHJlbTsNCiAgICBsaW5lLWhlaWdodDogMC40OHJlbTsNCiAgICBiYWNrZ3JvdW5kOiAjMDA5MWZmOw0KICAgIGJveC1zaGFkb3c6IDAgMC4wNHJlbSAwLjA4cmVtIDAgcmdiYSgwLCAxNDUsIDI1NSwgMC4zMik7DQogICAgYm9yZGVyLXJhZGl1czogMC4wNHJlbTsNCiAgICBib3JkZXItcmFkaXVzOiAwLjA0cmVtOw0KICAgIGNvbG9yOiAjZmZmOw0KICAgIGZvbnQtc2l6ZTogMC4xNnJlbTsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIH0NCn0NCi50aXRsZV9fYmFjayB7DQogIGRpc3BsYXk6IGZsZXg7DQogIGxpbmUtaGVpZ2h0OiAwLjQ0cmVtOw0KICBiYWNrZ3JvdW5kOiAjZmZmOw0KICBmb250LXNpemU6IDAuMTZyZW07DQogIGNvbG9yOiAjMzMzOw0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIHdpZHRoOiAwLjJyZW07DQogIG1hcmdpbi1sZWZ0OiAwLjE4cmVtOw0KICBmb250LXNpemU6IDAuMnJlbTsNCiAgY29sb3I6ICNiNmI2YjY7DQp9DQo="},{"version":3,"sources":["C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\usernameChange\\UsernameChange.vue"],"names":[],"mappings":"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","file":"C:/Users/admin/Desktop/lzc_website/src/views/usernameChange/UsernameChange.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div\r\n    class=\"iconfont title__back\"\r\n    @click=\"handleBackClick\"\r\n  >&#xe602;</div>\r\n  <div class=\"wrapper\">\r\n    <div class=\"wrapper__input\">\r\n      <input\r\n        class=\"wrapper__input__content\"\r\n        placeholder=\"请输入新用户名\"\r\n        v-model=\"username\"\r\n      />\r\n    </div>\r\n    <div\r\n      class=\"wrapper__change-button\"\r\n      @click=\"handleChange\"\r\n    >修改</div>\r\n    <Toast\r\n      v-if=\"show\"\r\n      :message=\"toastMessage\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useRouter } from 'vue-router'\r\nimport { reactive, toRefs } from 'vue'\r\nimport { post } from '../../utils/request'\r\nimport Toast, { useToastEffect } from '../../components/Toast'\r\n\r\n// 改密逻辑\r\nconst useChangeEffect = (showToast) => {\r\n  const router = useRouter()\r\n  const userInfo = JSON.parse(localStorage.getItem('user'))\r\n  const data = reactive({\r\n    username: ''\r\n  })\r\n  const handleChange = async () => {\r\n    if (data.username === '') {\r\n      showToast('用户名不能为空!')\r\n    } else {\r\n      try {\r\n        const result = await post('/usernameChange', {\r\n          username: data.username,\r\n          id: userInfo.id\r\n        })\r\n        if (typeof result !== 'string') {\r\n          const userInfo = {\r\n            id: result.id,\r\n            name: result.username\r\n          }\r\n          localStorage.setItem('user', JSON.stringify(userInfo))\r\n          showToast('修改成功!')\r\n          setTimeout(() => {\r\n            router.push({ name: 'PersonalInfo' })\r\n          }, 2000)\r\n        } else if (result === 'exist') {\r\n          showToast('该用户名已存在!')\r\n          data.username = ''\r\n        } else if (result === 'again') {\r\n          showToast('新旧用户名不能相同!')\r\n          data.username = ''\r\n        }\r\n      } catch (e) {\r\n        showToast('请求失败!')\r\n      }\r\n    }\r\n  }\r\n  const { username } = toRefs(data)\r\n  return { username, handleChange }\r\n}\r\n\r\n// 点击回退\r\nconst useHandleBack = () => {\r\n  const router = useRouter()\r\n  const handleBackClick = () => { router.back() }\r\n  return handleBackClick\r\n}\r\n\r\nexport default {\r\n  name: 'PswChange',\r\n  components: { Toast },\r\n  setup () {\r\n    const { show, toastMessage, showToast } = useToastEffect()\r\n    const handleBackClick = useHandleBack()\r\n    const { username, handleChange } = useChangeEffect(showToast)\r\n    return { username, handleChange, show, toastMessage, handleBackClick }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.wrapper {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 0;\r\n  right: 0;\r\n  transform: translateY(-50%);\r\n  &__input {\r\n    height: 0.48rem;\r\n    margin: 0 0.4rem 0.16rem 0.4rem;\r\n    padding: 0 0.16rem;\r\n    background: #f9f9f9;\r\n    border: 0.01rem solid rgba(0, 0, 0, 0.1);\r\n    border-radius: 0.06rem;\r\n    &__content {\r\n      margin-top: 0.12rem;\r\n      line-height: 0.22rem;\r\n      border: none;\r\n      outline: none;\r\n      width: 100%;\r\n      background: none;\r\n      font-size: 0.16rem;\r\n      color: rgba(0, 0, 0, 0.5);\r\n      &::placeholder {\r\n        color: rgba(0, 0, 0, 0.5);\r\n      }\r\n    }\r\n  }\r\n  &__change-button {\r\n    margin: 0.32rem 0.4rem 0 0.4rem;\r\n    line-height: 0.48rem;\r\n    background: #0091ff;\r\n    box-shadow: 0 0.04rem 0.08rem 0 rgba(0, 145, 255, 0.32);\r\n    border-radius: 0.04rem;\r\n    border-radius: 0.04rem;\r\n    color: #fff;\r\n    font-size: 0.16rem;\r\n    text-align: center;\r\n  }\r\n}\r\n.title__back {\r\n  display: flex;\r\n  line-height: 0.44rem;\r\n  background: #fff;\r\n  font-size: 0.16rem;\r\n  color: #333;\r\n  text-align: center;\r\n  width: 0.2rem;\r\n  margin-left: 0.18rem;\r\n  font-size: 0.2rem;\r\n  color: #b6b6b6;\r\n}\r\n</style>\r\n"]}]}