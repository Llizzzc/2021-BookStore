{"remainingRequest":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\admin\\AllBook.vue?vue&type=template&id=3c51af42&scoped=true","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\admin\\AllBook.vue","mtime":1620223953395},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIDxkaXYgY2xhc3M9IndhcnBwZXIiPg0KICAgIDxkaXYgY2xhc3M9InNlYXJjaCI+DQogICAgICA8ZGl2DQogICAgICAgIGNsYXNzPSJzZWFyY2hfX2JhY2sgaWNvbmZvbnQiDQogICAgICAgIEBjbGljaz0iaGFuZGxlQmFja0NsaWNrIg0KICAgICAgPiYjeGU2MDI7PC9kaXY+DQogICAgPC9kaXY+DQogICAgPFRvYXN0DQogICAgICB2LWlmPSJzaG93Ig0KICAgICAgOm1lc3NhZ2U9InRvYXN0TWVzc2FnZSINCiAgICAvPg0KICA8L2Rpdj4NCiAgPEJvb2tDb250ZW50IC8+DQogIDxkaXYNCiAgICBjbGFzcz0iYWRkIg0KICAgIEBjbGljaz0iaGFuZGxlQWRkIg0KICA+5aKe5Yqg5Lmm57GNPC9kaXY+DQo="},{"version":3,"sources":["C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\admin\\AllBook.vue"],"names":[],"mappings":";EACE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACjB,CAAC,CAAC,CAAC;QACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACzB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAChB,CAAC,CAAC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC,CAAC,CAAC;MACH,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACxB,CAAC;EACH,CAAC,CAAC,CAAC,CAAC,CAAC;EACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;EACd,CAAC,CAAC,CAAC;IACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC","file":"C:/Users/admin/Desktop/lzc_website/src/views/admin/AllBook.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div class=\"warpper\">\r\n    <div class=\"search\">\r\n      <div\r\n        class=\"search__back iconfont\"\r\n        @click=\"handleBackClick\"\r\n      >&#xe602;</div>\r\n    </div>\r\n    <Toast\r\n      v-if=\"show\"\r\n      :message=\"toastMessage\"\r\n    />\r\n  </div>\r\n  <BookContent />\r\n  <div\r\n    class=\"add\"\r\n    @click=\"handleAdd\"\r\n  >增加书籍</div>\r\n</template>\r\n\r\n<script>\r\nimport { post } from '../../utils/request'\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport { reactive, toRefs } from 'vue'\r\nimport BookContent from '../admin/BookContent'\r\nimport Toast, { useToastEffect } from '../../components/Toast'\r\n\r\n// 点击回退\r\nconst useBackRouterEffect = () => {\r\n  const router = useRouter()\r\n  const handleBackClick = () => {\r\n    router.back()\r\n  }\r\n  return { handleBackClick }\r\n}\r\n\r\n// 点击搜索\r\nconst useSearchEffect = (showToast) => {\r\n  const route = useRoute()\r\n  const shopId = route.params.id\r\n  const data = reactive({\r\n    name: '',\r\n    tab: 0\r\n  })\r\n  const handleSearchClick = async () => {\r\n    if (data.name === '') {\r\n      showToast('请输入商品名称!')\r\n    } else {\r\n      try {\r\n        const result = await post('/search', {\r\n          id: shopId,\r\n          name: data.name\r\n        })\r\n        if (result === 'None') {\r\n          showToast('未找到该书籍!')\r\n        } else {\r\n          data.tab = result\r\n        }\r\n      } catch (e) {\r\n        showToast('请求失败!')\r\n      }\r\n    }\r\n  }\r\n  const { name, tab } = toRefs(data)\r\n  return { handleSearchClick, name, tab }\r\n}\r\n\r\n// 增加书籍逻辑\r\nconst useAddBook = () => {\r\n  const router = useRouter()\r\n  const handleAdd = () => {\r\n    router.push({ name: 'AddBook' })\r\n  }\r\n  return handleAdd\r\n}\r\n\r\nexport default {\r\n  name: 'AllBook',\r\n  components: { BookContent, Toast },\r\n  setup () {\r\n    const { show, toastMessage, showToast } = useToastEffect()\r\n    const { handleBackClick } = useBackRouterEffect()\r\n    const handleAdd = useAddBook()\r\n    const { handleSearchClick, name, tab } = useSearchEffect(showToast)\r\n    return { handleBackClick, handleSearchClick, show, toastMessage, name, tab, handleAdd }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.wrapper {\r\n  padding: 0 0.18rem;\r\n}\r\n\r\n.search {\r\n  display: flex;\r\n  margin: 0.2rem 0 0.16rem 0;\r\n  &__back {\r\n    width: 0.3rem;\r\n    font-size: 0.3rem;\r\n    color: #b6b6b6;\r\n  }\r\n}\r\n.add {\r\n  position: absolute;\r\n  width: 100%;\r\n  bottom: 0;\r\n  line-height: 0.32rem;\r\n  background: #0091ff;\r\n  color: #f8f8f8;\r\n  text-align: center;\r\n  border-radius: 0.04rem;\r\n}\r\n</style>\r\n"]}]}