{"remainingRequest":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\admin\\AddShopBook.vue?vue&type=template&id=822d4594&scoped=true","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\admin\\AddShopBook.vue","mtime":1620218117307},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\lzc_website\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIDxkaXYgY2xhc3M9IndyYXBwZXIiPg0KICAgIDxkaXYgY2xhc3M9InRpdGxlIj4NCiAgICAgIDxkaXYNCiAgICAgICAgY2xhc3M9Imljb25mb250IHRpdGxlX19iYWNrIg0KICAgICAgICBAY2xpY2s9ImhhbmRsZUJhY2tDbGljayINCiAgICAgID4mI3hlNjAyOzwvZGl2Pg0KICAgICAgPGRpdiBjbGFzcz0idGl0bGVfX3RleHQiPg0KICAgICAgICDlop7liqDkuabnsY0NCiAgICAgIDwvZGl2Pg0KICAgICAgPGRpdg0KICAgICAgICBjbGFzcz0idGl0bGVfX3NhdmUiDQogICAgICAgIEBjbGljaz0iaGFuZGxlQWRkIg0KICAgICAgPuehruWumjwvZGl2Pg0KICAgIDwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9ImZvcm0iPg0KICAgICAgPGRpdiBjbGFzcz0iZm9ybV9faXRlbSI+DQogICAgICAgIDxkaXYgY2xhc3M9ImZvcm1fX2l0ZW1fX2xhYmVsIj7kuablkI06PC9kaXY+DQogICAgICAgIDxpbnB1dA0KICAgICAgICAgIGNsYXNzPSJmb3JtX19pdGVtX19jb250ZW50Ig0KICAgICAgICAgIHBsYWNlaG9sZGVyPSLlpoLopb/muLjorrAiDQogICAgICAgICAgdi1tb2RlbD0ibmFtZSINCiAgICAgICAgLz4NCiAgICAgIDwvZGl2Pg0KICAgICAgPGRpdiBjbGFzcz0iZm9ybV9faXRlbSI+DQogICAgICAgIDxkaXYgY2xhc3M9ImZvcm1fX2l0ZW1fX2xhYmVsIj7lupPlrZg6PC9kaXY+DQogICAgICAgIDxpbnB1dA0KICAgICAgICAgIGNsYXNzPSJmb3JtX19pdGVtX19jb250ZW50Ig0KICAgICAgICAgIHBsYWNlaG9sZGVyPSLlpoI1MCINCiAgICAgICAgICB2LW1vZGVsPSJzdG9jayINCiAgICAgICAgLz4NCiAgICAgIDwvZGl2Pg0KICAgICAgPGRpdiBjbGFzcz0iZm9ybV9faXRlbSI+DQogICAgICAgIDxkaXYgY2xhc3M9ImZvcm1fX2l0ZW1fX2xhYmVsIj7mnIjllK46PC9kaXY+DQogICAgICAgIDxkaXYgY2xhc3M9ImZvcm1fX2l0ZW1fX2NvbnRlbnQiPg0KICAgICAgICAgIHt7IHNhbGVzIH19DQogICAgICAgIDwvZGl2Pg0KICAgICAgPC9kaXY+DQogICAgICA8ZGl2IGNsYXNzPSJmb3JtX19pdGVtIj4NCiAgICAgICAgPGRpdiBjbGFzcz0iZm9ybV9faXRlbV9fbGFiZWwiPueOsOS7tzo8L2Rpdj4NCiAgICAgICAgPGlucHV0DQogICAgICAgICAgY2xhc3M9ImZvcm1fX2l0ZW1fX2NvbnRlbnQiDQogICAgICAgICAgcGxhY2Vob2xkZXI9IuWmgjEwIg0KICAgICAgICAgIHYtbW9kZWw9InByaWNlIg0KICAgICAgICAvPg0KICAgICAgPC9kaXY+DQogICAgICA8ZGl2IGNsYXNzPSJmb3JtX19pdGVtIj4NCiAgICAgICAgPGRpdiBjbGFzcz0iZm9ybV9faXRlbV9fbGFiZWwiPuWOn+S7tzo8L2Rpdj4NCiAgICAgICAgPGlucHV0DQogICAgICAgICAgY2xhc3M9ImZvcm1fX2l0ZW1fX2NvbnRlbnQiDQogICAgICAgICAgcGxhY2Vob2xkZXI9IuWmgjIwIg0KICAgICAgICAgIHYtbW9kZWw9Im9sZFByaWNlIg0KICAgICAgICAvPg0KICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQogIDwvZGl2Pg0KICA8VG9hc3QNCiAgICB2LWlmPSJzaG93Ig0KICAgIDptZXNzYWdlPSJ0b2FzdE1lc3NhZ2UiDQogIC8+DQo="},{"version":3,"sources":["C:\\Users\\admin\\Desktop\\lzc_website\\src\\views\\admin\\AddShopBook.vue"],"names":[],"mappings":"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","file":"C:/Users/admin/Desktop/lzc_website/src/views/admin/AddShopBook.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div class=\"wrapper\">\r\n    <div class=\"title\">\r\n      <div\r\n        class=\"iconfont title__back\"\r\n        @click=\"handleBackClick\"\r\n      >&#xe602;</div>\r\n      <div class=\"title__text\">\r\n        增加书籍\r\n      </div>\r\n      <div\r\n        class=\"title__save\"\r\n        @click=\"handleAdd\"\r\n      >确定</div>\r\n    </div>\r\n    <div class=\"form\">\r\n      <div class=\"form__item\">\r\n        <div class=\"form__item__label\">书名:</div>\r\n        <input\r\n          class=\"form__item__content\"\r\n          placeholder=\"如西游记\"\r\n          v-model=\"name\"\r\n        />\r\n      </div>\r\n      <div class=\"form__item\">\r\n        <div class=\"form__item__label\">库存:</div>\r\n        <input\r\n          class=\"form__item__content\"\r\n          placeholder=\"如50\"\r\n          v-model=\"stock\"\r\n        />\r\n      </div>\r\n      <div class=\"form__item\">\r\n        <div class=\"form__item__label\">月售:</div>\r\n        <div class=\"form__item__content\">\r\n          {{ sales }}\r\n        </div>\r\n      </div>\r\n      <div class=\"form__item\">\r\n        <div class=\"form__item__label\">现价:</div>\r\n        <input\r\n          class=\"form__item__content\"\r\n          placeholder=\"如10\"\r\n          v-model=\"price\"\r\n        />\r\n      </div>\r\n      <div class=\"form__item\">\r\n        <div class=\"form__item__label\">原价:</div>\r\n        <input\r\n          class=\"form__item__content\"\r\n          placeholder=\"如20\"\r\n          v-model=\"oldPrice\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <Toast\r\n    v-if=\"show\"\r\n    :message=\"toastMessage\"\r\n  />\r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRefs } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { post } from '../../utils/request'\r\nimport Toast, { useToastEffect } from '../../components/Toast'\r\n\r\n// 增加书籍逻辑\r\nconst useAddAddressEffect = (showToast) => {\r\n  const router = useRouter()\r\n  const route = useRoute()\r\n  const data = reactive({\r\n    name: '',\r\n    stock: '',\r\n    sales: 0,\r\n    price: '',\r\n    oldPrice: ''\r\n  })\r\n  const handleAdd = async () => {\r\n    if (data.name === '' || data.stock === '' || data.price === '' || data.oldPrice === '') {\r\n      showToast('信息不能为空!')\r\n    } else {\r\n      try {\r\n        const result = await post('/addShopBook', {\r\n          name: data.name,\r\n          stock: data.stock,\r\n          sales: data.sales,\r\n          price: data.price,\r\n          oldPrice: data.oldPrice,\r\n          shopId: route.params.id\r\n        })\r\n        if (result === 'ok') {\r\n          showToast('添加成功!')\r\n          setTimeout(() => {\r\n            router.push({ name: 'TheShop' })\r\n          }, 2000)\r\n        } else if (result === 'exist') {\r\n          showToast('该书已存在,请勿重复添加!')\r\n        }\r\n      } catch (e) {\r\n        showToast('请求失败!')\r\n      }\r\n    }\r\n  }\r\n  const { name, price, stock, sales, oldPrice } = toRefs(data)\r\n  return { handleAdd, name, price, stock, sales, oldPrice }\r\n}\r\n\r\n// 点击回退\r\nconst useHandleBack = () => {\r\n  const router = useRouter()\r\n  const handleBackClick = () => { router.back() }\r\n  return handleBackClick\r\n}\r\n\r\nexport default {\r\n  name: 'AddShopBook',\r\n  components: { Toast },\r\n  setup () {\r\n    const { show, toastMessage, showToast } = useToastEffect()\r\n    const handleBackClick = useHandleBack()\r\n    const { handleAdd, name, price, stock, sales, oldPrice } = useAddAddressEffect(showToast)\r\n    return { handleBackClick, show, toastMessage, handleAdd, name, price, stock, sales, oldPrice }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.wrapper {\r\n  overflow-y: auto;\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  background: #f8f8f8;\r\n}\r\n.title {\r\n  display: flex;\r\n  line-height: 0.44rem;\r\n  background: #fff;\r\n  font-size: 0.16rem;\r\n  color: #333;\r\n  text-align: center;\r\n  &__back {\r\n    width: 0.2rem;\r\n    margin-left: 0.18rem;\r\n    font-size: 0.2rem;\r\n    color: #b7b7b7;\r\n  }\r\n  &__text {\r\n    flex: 1;\r\n    text-align: center;\r\n  }\r\n  &__save {\r\n    margin-right: 0.2rem;\r\n    font-size: 0.14rem;\r\n  }\r\n}\r\n.form {\r\n  padding: 0 0.2rem;\r\n  margin-top: 0.12rem;\r\n  background: #fff;\r\n  border-top: 0.01rem solid #f1f1f1;\r\n  border-bottom: 0.01rem solid #f1f1f1;\r\n  &__item {\r\n    display: flex;\r\n    padding: 0.12rem 0;\r\n    line-height: 0.2rem;\r\n    font-size: 0.14rem;\r\n    border-bottom: 0.01rem solid #f1f1f1;\r\n    &:last-of-type {\r\n      border-bottom: none;\r\n    }\r\n    &__label {\r\n      margin-right: 0.05rem;\r\n      color: #666;\r\n    }\r\n    &__content {\r\n      flex: 1;\r\n      border: none;\r\n      outline: none;\r\n      color: #3f3f3f;\r\n      &::placeholder {\r\n        color: #b7b7b7;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}